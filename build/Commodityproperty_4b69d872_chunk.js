(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1590:function(e,t,n){},1756:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ve}));n(1491);var a=n(1492),r=n.n(a),o=(n(1495),n(1496)),i=n.n(o),c=(n(282),n(223)),l=n.n(c),s=n(3),u=n.n(s),f=(n(88),n(39)),p=n.n(f),d=n(25),h=n.n(d),m=n(20),b=n.n(m),g=n(26),v=n.n(g),y=n(22),w=n.n(y),O=n(16),E=n.n(O),C=n(1),j=n.n(C),x=n(55),k=(n(44),n(10)),_=(n(190),n(87)),D=n.n(_),P=(n(122),n(42)),S=n.n(P),R=(n(284),n(218)),F=(n(81),n(18)),W=n.n(F),N=(n(82),n(41)),V=n.n(N),M=n(28),A=n.n(M),I=n(90),T=n.n(I),q=(n(73),n(30)),z=n.n(q),J=(n(123),n(51)),L=n.n(J),U=(n(121),n(45)),B=n.n(U),G=n(59),H=n(219);n(1590);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w()(this,n)}}var X=B.a.Item,Y=L.a.confirm,Z=z.a.Search,$=function(e){v()(n,e);var t=Q(n);function n(e,a){var r;return h()(this,n),(r=t.call(this,e,a)).state={tablist:[],tabsearch:[],type:"add",editdata:""},r.componentDidMount=function(){var e=r.context.rowData;r.setState({tablist:e.option_values})},r.beforeCallback=function(e,t){},r.onCancel=function(){r.props.form.resetFields(),r.context.toggleWin("editshow",{})},r.tabclick=function(e,t){var n=r.props.form;n.setFieldsValue({name_1:e.name}),n.setFieldsValue({alias:e.alias}),r.setState({type:"edit",index:t,editdata:e})},r.close=function(e,t,n){n.stopPropagation(),n.preventDefault();var a=r.state.tablist,o=T()(r);Y({title:"确定是否要删除?",content:"删除后不可撤销",onOk:function(){Object(k.b)(x.a.del_param_option_value,{option_value_ids:e.id}).then((function(e){200==e.resultId?(p.a.success("删除成功"),a.splice(t,1),o.setState({tablist:a})):p.a.error(e.resultMsg)}))},onCancel:function(){}})},r.issearch=function(e){for(var t=r.state.tablist,n=e.replace("，",",").split(",").filter((function(e){return!(!(e=e.trim())&&0!==e)})),a=[],o=t,i=o.length,c=function(e){var t=o[e].name;n.map((function(n){n=n.trim(),-1==t.toString().indexOf(n)||a.includes(o[e])||a.push(o[e])}))},l=0;l<i;l++)c(l);r.setState({tabsearch:a})},r.addtab=function(){var e=r.props.form,t=r.context.rowData,n=r.state,a=n.type,o=n.tablist,i=n.index,c=n.editdata;if(e.getFieldValue("name_1")){var l={name:e.getFieldValue("name_1"),alias:e.getFieldValue("alias"),option_id:t.id};"edit"==a&&(l.id=c.id),Object(k.b)(x.a.save_param_option_value,l).then((function(e){200==e.resultId?("edit"==a?o.splice(i,1,e.resultData):o.push(e.resultData),r.setState({tablist:o})):p.a.error(e.resultMsg)})),r.setState({type:"add"}),e.resetFields("name_1"),e.resetFields("alias")}else p.a.error("属性值不能为空")},r}return b()(n,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.context.rowData,a=void 0===n?{}:n,r=this.state,o=r.tablist,i=r.tabsearch,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({wrapClassName:"shop-Modal",beforeCallback:this.beforeCallback,closable:!1,title:!1,footer:!1,visible:this.context.editshow,onCancel:this.onCancel,form:this.props.form,method:x.a.save_param_option},this.context.batConfig);return j.a.createElement(H.ModalComp,c,j.a.createElement(B.a,{className:"resetFormStyle",style:{marginTop:"20px",overflow:"hidden",padding:"20px"}},j.a.createElement(D.a,null,j.a.createElement(S.a,{span:24},j.a.createElement(X,A()({label:"属性名称"},G.f),t("name",{initialValue:a.name||"",rules:[{required:!0,message:"请输入属性名称"}]})(j.a.createElement(z.a,{disabled:!0})))),j.a.createElement(S.a,{span:24},j.a.createElement(X,A()({label:"属性值"},G.f),t("name_1",{initialValue:a.name_1||"",rules:[{required:!1,message:"请输入属性值"}]})(j.a.createElement(z.a,null)))),j.a.createElement(S.a,{span:24},j.a.createElement(X,A()({label:"前台映射"},G.f),t("alias",{initialValue:a.alias||""})(j.a.createElement(z.a,null)))),j.a.createElement(S.a,{span:24},j.a.createElement(V.a,{type:"primary",onClick:function(){return e.addtab()},style:{width:"100%",borderRadius:"0",background:"#fff",color:"#4AAAF1"}},"add"==this.state.type?"新增":"编辑")),j.a.createElement(S.a,{span:24},j.a.createElement(Z,{placeholder:"输入属性值搜索，多个可用逗号，隔开",onSearch:function(t){return e.issearch(t)},style:{width:"100%",marginTop:"20px"}}),j.a.createElement("div",{className:"edit-tile"},(i.length?i:o).map((function(t,n){return j.a.createElement("span",{onClick:function(){return e.tabclick(t,n)}},t.name," ",j.a.createElement(W.a,{onClick:function(a){return e.close(t,n,a)},type:"close-circle"}))})))))))}}]),n}(C.Component);$.defaultProps={},$.contextType=R.a;var ee=B.a.create()($);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w()(this,n)}}var ae=B.a.Item,re=function(e){v()(n,e);var t=ne(n);function n(e,a){var r;return h()(this,n),(r=t.call(this,e,a)).state={categoryStr:[]},r.beforeCallback=function(e,t){var n=r.context.rowData,a=void 0===n?{}:n,o=0==Object.keys(a).length,i={};i.name=e.name,i.status=e.status?1:0,i.type="select",o||(i.id=a.id),Object(k.b)(x.a.save_param_option,i).then((function(e){r.onCancel(),r.context.changetable()}))},r.onCancel=function(){r.props.form.resetFields(),r.context.toggleWin("addshow",{})},r}return b()(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.context.rowData,n=void 0===t?{}:t,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({wrapClassName:"shop-Modal",beforeCallback:this.beforeCallback,closable:!1,title:!1,visible:this.context.addshow,onCancel:this.onCancel,form:this.props.form,method:x.a.save_param_option},this.context.batConfig);return j.a.createElement(H.ModalComp,a,j.a.createElement(B.a,{className:"resetFormStyle",style:{marginTop:"20px",overflow:"hidden",padding:"20px"}},j.a.createElement(D.a,null,j.a.createElement(S.a,{span:24},j.a.createElement(ae,A()({label:"属性名称"},G.b),e("name",{initialValue:n.name||[],rules:[{required:!0,message:"请输入属性名称"}]})(j.a.createElement(z.a,null)))),j.a.createElement(S.a,{span:24},j.a.createElement(ae,A()({label:"状态"},G.b),e("status",{initialValue:!!n.status})(j.a.createElement(i.a,{checkedChildren:"启用",unCheckedChildren:"禁用",defaultChecked:1==n.status})))))))}}]),n}(C.Component);re.defaultProps={},re.contextType=R.a;var oe=B.a.create()(re),ie=n(1489),ce=n(24);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w()(this,n)}}var se=function(e){v()(n,e);var t=le(n);function n(e,a){var r;return h()(this,n),(r=t.call(this,e,a)).state={},r.downLoad=function(){},r.getMethodUrl=function(e,t){var n=Object(ce.a)(e);return n+="".concat(e,"?").concat(t)},r.toggleWin=function(e){r.context.toggleWin(e,{})},r}return b()(n,[{key:"render",value:function(){var e=this,t={config:[{title:"新增",noAuth:"add",noCheck:!0,onClick:function(){return e.toggleWin("addshow")}},{title:"删除",noAuth:"del",type:"danger",method:x.a.del_param_option,unicode:"option_ids|id"}],method:"",unicode:"option_ids|id",batConfig:this.context.batConfig};return j.a.createElement("div",{className:"action-bar"},j.a.createElement(D.a,{type:"flex",justify:"space-between",align:"middle",gutter:10},j.a.createElement(S.a,null,j.a.createElement(ie.a,t))),this.context.addshow?j.a.createElement(oe,null):"",this.context.editshow?j.a.createElement(ee,null):"")}}]),n}(C.Component);se.defaultProps={},se.contextType=R.a;var ue,fe,pe,de=n(1493),he=n(1490);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return w()(this,n)}}var ve=(fe=ue=Object(he.a)({toolConfig:{list:{action:"get_param_option_pager",params:{}}}})(pe=function(e){v()(n,e);var t=ge(n);function n(e,a){var r;h()(this,n),(r=t.call(this,e,a)).state={visible:!1,addshow:!1,editshow:!1,isstate:!1},r.componentDidMount=function(){r.props.changeSearch()},r.changetable=function(){r.setState({isstate:!r.state.isstate}),r.props.changeSearch()},r.onSwitch=function(e,t){Object(k.b)(x.a.save_param_option_status,{option_id:e.id,status:t?1:0}).then((function(e){e&&(p.a.success(e.msg),r.props.changeSearch())}))},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",n=arguments.length>1?arguments[1]:void 0;r.setState((e={},u()(e,t,!r.state[t]),u()(e,"rowData",n),e))};return r.columns=[{title:"属性名称",dataIndex:"name"},{title:"属性值",dataIndex:"channel_name",render:function(e,t){var n=j.a.createElement("div",{style:{maxWidth:"500px",wordWrap:"break-word"}},t.option_values.map((function(e){return j.a.createElement("span",{style:{marginRight:"10px"}},e.name)})));return j.a.createElement(l.a,{content:n,title:"属性值",trigger:"hover"},j.a.createElement("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},n))}},{title:"操作",dataIndex:"id",render:function(e,t){return j.a.createElement("div",{style:{display:"flex"}},"Color"==t.name||"Size"==t.name?"":j.a.createElement(i.a,{onChange:function(e){return r.onSwitch(t,e)},checkedChildren:"启用",unCheckedChildren:"禁用",checked:1==t.status}),j.a.createElement(ie.a,{config:[{title:"编辑",noAuth:"edit",noCheck:!0,ghost:!0,visible:"Color"!=(n=t).name&&"Size"!=n.name,onClick:function(){return r.toggleWin("addshow",n)}},{title:"添加",noAuth:"detail",noCheck:!0,ghost:!0,onClick:function(){return r.toggleWin("editshow",n)}}],method:"",unicode:"ids|id",batConfig:r.props.batConfig,rowData:n}));var n}}],r}return b()(n,[{key:"render",value:function(){var e=be({columns:this.columns},this.props.tableConfig),t=be(be({selectedRows:this.props.selectedRows},this.state),{},{toggleWin:this.toggleWin,addshow:this.state.addshow,editshow:this.state.editshow,batConfig:this.props.batConfig,changetable:this.changetable});return j.a.createElement("div",{className:"userStyle"},j.a.createElement(R.a.Provider,{value:t},j.a.createElement("div",{className:"header-tool"},j.a.createElement("p",null,"商品属性"),j.a.createElement(se,null)),j.a.createElement(r.a,{className:"content-main"},j.a.createElement("div",{className:"content-table"},j.a.createElement(de.a,e)))))}}]),n}(C.Component))||pe,ue.defaultProps={},fe)}}]);