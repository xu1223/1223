(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1593:function(e,t,n){},1754:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ge}));n(1491);var r,a,c,i=n(1492),o=n.n(i),l=(n(73),n(30)),s=n.n(l),u=(n(1495),n(1496)),f=n.n(u),p=n(3),m=n.n(p),h=n(74),d=n.n(h),b=(n(88),n(39)),g=n.n(b),v=n(376),y=n.n(v),O=n(25),E=n.n(O),D=n(20),w=n.n(D),j=n(26),C=n.n(j),P=n(22),k=n.n(P),x=n(16),_=n.n(x),R=n(1),S=n.n(R),A=(n(121),n(45)),I=n.n(A),N=n(1494);n(5);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}var M=(a=r=I.a.create()(c=function(e){C()(n,e);var t=F(n);function n(e,r){var a;return E()(this,n),(a=t.call(this,e,r)).state={},a.handleFormData=function(e){a.props.changeSearch(W(W({},e),{}))},a}return w()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[{labelConf:[{name:"英文名",key:"name"},{name:"姓名",key:"title"}],span:6,type:"input"},{labelConf:{name:"是否推荐",key:"is_rec"},span:6,data:[{name:"是",id:"1"},{name:"否",id:"2"}]}];return S.a.createElement(N.a,{loading:this.props.loading,SearchConf:e,form:this.props.form,handleFormData:this.handleFormData})}}]),n}(R.Component))||c,r.defaultProps={},a),q=(n(190),n(87)),z=n.n(q),B=n(1489),J=(n(124),n(64)),T=n.n(J),L=(n(122),n(42)),G=n.n(L),H=n(28),K=n.n(H),Q=(n(81),n(18)),U=n.n(Q),X=n(59),Y=n(219),Z=n(218),$=n(55);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}var ne=I.a.Item,re=function(e){C()(n,e);var t=te(n);function n(e,r){var a;return E()(this,n),(a=t.call(this,e,r)).state={previewVisible:!1,previewImage:"",fileList:[],rolesDataArr:a.context.rolesDataArr||[]},a.beforeCallback=function(e,t){e.is_rec=1==e.is_rec?"1":"2",a.context.rowData.id&&(e.id=a.context.rowData.id),t(e)},a.SearchValue=function(e){var t=a.state.rolesDataArr,n=t.length,r=e.split(";");if(e){for(var c=0;c<r.length;c++)for(var i=0;i<n;i++)-1!=t[i].name.indexOf(r[c])?t[i].state=!0:t[i].state=!1;a.setState({rolesDataArr:t})}""==e&&(t.map((function(e){e.state=!0})),a.setState({rolesDataArr:t}))},a}return w()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.context.rowData,r=void 0===n?{}:n,a=0==Object.keys(r).length,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({beforeCallback:this.beforeCallback,title:S.a.createElement("span",null,S.a.createElement(U.a,{type:a?"diff":"edit",style:{color:"#798994",marginRight:10}}),a?"新增客服":"编辑客服"),method:a?$.a.add_live_chat:$.a.edit_live_chat,visible:this.context.visible,onCancel:function(){return e.context.toggleWin()},form:this.props.form},this.context.batConfig);return S.a.createElement(Y.DrawerComp,c,S.a.createElement(I.a,{className:"bulletbox-form"},S.a.createElement(z.a,{type:"flex",justify:"space-between",align:"middle"},S.a.createElement(G.a,{span:24},S.a.createElement(ne,K()({label:"英文名"},X.b),t("name",{initialValue:r.name||"",rules:[{required:!0,message:"请填写英文名"}]})(S.a.createElement(s.a,null)))),S.a.createElement(G.a,{span:24},S.a.createElement(ne,K()({label:"真实姓名"},X.b),t("title",{initialValue:r.title||"",rules:[{required:!0,message:"请填写真实姓名"}]})(S.a.createElement(s.a,null)))),S.a.createElement(G.a,{span:24},S.a.createElement(ne,K()({label:"Whatsapp"},X.b),t("whatsapp",{initialValue:r.whatsapp||""})(S.a.createElement(s.a,null)))),S.a.createElement(G.a,{span:24},S.a.createElement(ne,K()({label:"联系邮箱"},X.b),t("email",{initialValue:r.email||""})(S.a.createElement(s.a,null)))),S.a.createElement(G.a,{span:24},S.a.createElement(ne,K()({label:"电话"},X.b),t("mobile",{initialValue:r.mobile||"",rules:[{required:!0,message:"必填项"}]})(S.a.createElement(s.a,null)))),S.a.createElement(G.a,{span:24},S.a.createElement("div",{className:"Recommendation-main"},S.a.createElement(ne,K()({label:"是否推荐"},X.b),t("is_rec",{initialValue:"1"==r.is_rec,valuePropName:"checked"})(S.a.createElement(f.a,{checkedChildren:"启用",unCheckedChildren:"禁用"}))),S.a.createElement("div",{className:"Recommendation-i"},S.a.createElement(T.a,{placement:"top",title:"开启推荐，客服将会在商城前台悬浮展示"},S.a.createElement(U.a,{type:"info-circle"}))))))))}}]),n}(R.Component);re.defaultProps={},re.contextType=Z.a;var ae=I.a.create()(re);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}var ie=function(e){C()(n,e);var t=ce(n);function n(e,r){var a;return E()(this,n),(a=t.call(this,e,r)).state={},a}return w()(n,[{key:"render",value:function(){var e=this,t={config:[{title:"添加",noAuth:"add",noCheck:!0,onClick:function(){return e.context.toggleWin("visible",{rowData:{}})}}],method:$.a.user_manager_batch,unicode:"ids|id",batConfig:this.context.batConfig};return S.a.createElement("div",{className:"action-bar"},S.a.createElement(z.a,{type:"flex",justify:"space-between",align:"middle",gutter:10},S.a.createElement(B.a,t)),this.context.visible&&S.a.createElement(ae,null))}}]),n}(R.Component);ie.defaultProps={},ie.contextType=Z.a;var oe,le,se,ue=n(1490),fe=n(731),pe=n(10),me=n(1493);n(1593);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_()(e);if(t){var a=_()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k()(this,n)}}var ge=(le=oe=Object(ue.a)({toolConfig:{list:{action:"get_live_chat_list_pager",params:{}}}})(se=function(e){C()(n,e);var t=be(n);function n(e,r){var a;return E()(this,n),(a=t.call(this,e,r)).state={},a.componentDidMount=y()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.changeSearch({pagesize:"20"}),fe.a.order.get_member_list_pager({}).then((function(e){e&&g.a.success("修改成功")}));case 2:case"end":return e.stop()}}),e)}))),a.onsortBlur=function(e,t,n){e.target.value},a.switchChange=function(e,t){var n=e?"1":"2";Object(pe.b)($.a.edit_live_chat,{id:t.id,is_rec:n}).then((function(e){e&&(g.a.success(e.resultMsg),a.props.changeSearch())}))},a.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",n=arguments.length>1?arguments[1]:void 0;a.setState((e={},m()(e,t,!a.state[t]),m()(e,"otherConfig",n),e))},a._batProps=function(e){return{config:[{title:"编辑",noAuth:"edit",noCheck:!0,size:"small",ghost:!0,onClick:function(){return a.toggleWin("visible",{rowData:e})}},{title:"删除",noAuth:"delete",method:$.a.delete_live_chat,size:"small",ghost:!0,params:{ids:e.id},type:"danger"}],batConfig:a.props.batConfig,rowData:e}},a.columns=[{title:"名字",dataIndex:"title"},{title:"英文名",dataIndex:"name"},{title:"邮箱",dataIndex:"email"},{title:"Whatsapp",dataIndex:"whatsapp"},{title:"联系手机",dataIndex:"mobile"},{title:"推荐",dataIndex:"is_rec",render:function(e,t){return S.a.createElement("span",null,S.a.createElement(f.a,{checked:"1"==t.is_rec,checkedChildren:"启用",unCheckedChildren:"禁用",onChange:function(e){return a.switchChange(e,t)}}))}},{title:"排序",dataIndex:"sort_order",width:180,render:function(e,t){return S.a.createElement(s.a,{defaultValue:e,onBlur:function(n){return a.onsortBlur(n,t.id,e)}})}},{title:"操作",dataIndex:"key",render:function(e,t,n){return S.a.createElement(B.a,a._batProps(t))}}],a}return w()(n,[{key:"render",value:function(){var e=this.state,t=e.groupsDataArr,n=void 0===t?[]:t,r=e.rolesDataArr,a=void 0===r?[]:r,c=de({columns:this.columns},this.props.tableConfig),i=de(de({visible:this.state.visible,visibleg:this.state.visibleg},this.state.otherConfig),{},{toggleWin:this.toggleWin,batConfig:this.props.batConfig,rolesDataArr:a,groupsDataArr:n});return S.a.createElement("div",{className:"userStyle"},S.a.createElement(Z.a.Provider,{value:i},S.a.createElement(M,{changeSearch:this.props.changeSearch,groupsDataArr:n}),S.a.createElement("div",{className:"header-tool"},S.a.createElement("p",null,"客服管理"),S.a.createElement(ie,null)),S.a.createElement(o.a,{className:"content-main"},S.a.createElement("div",{className:"content-table"},S.a.createElement(me.a,c)))))}}]),n}(R.Component))||se,oe.defaultProps={},le)}}]);