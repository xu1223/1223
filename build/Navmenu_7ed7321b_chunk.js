(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1705:function(e,t,a){},1739:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Ve}));a(1491);var n=a(1492),r=a.n(n),i=a(373),o=a.n(i),c=(a(73),a(30)),l=a.n(c),s=(a(1495),a(1496)),u=a.n(s),p=a(3),m=a.n(p),f=(a(88),a(39)),d=a.n(f),h=a(25),g=a.n(h),v=a(20),y=a.n(v),E=a(26),b=a.n(E),_=a(22),w=a.n(_),O=a(16),C=a.n(O),S=(a(374),a(220)),P=a.n(S),D=a(1),j=a.n(D),x=(a(55),a(731)),k=(a(190),a(87)),R=a.n(k),V=(a(122),a(42)),N=a.n(V),T=a(218),F=a(1489),I=(a(732),a(375)),A=a.n(I),L=a(28),M=a.n(L),W=(a(89),a(40)),q=a.n(W),z=(a(121),a(45)),B=a.n(z),G=(a(735),a(379)),J=a.n(G),K=a(219),H=a(59),U=(a(123),a(51)),Q=a.n(U),X=(a(734),a(377)),Y=a.n(X),Z=(a(81),a(18)),$=a.n(Z),ee=a(74),te=a.n(ee),ae=a(376),ne=a.n(ae),re=a(24);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var oe=function(e){b()(a,e);var t=ie(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){r.props.value&&r.setState({fileList:[{uid:"-1",name:"image.png",status:"done",url:r.props.value}]})},r.handlePreview=function(){var e=ne()(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:r.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.fileList;r.setState({fileList:t});var a={};t.map((function(e){a[r.props.id]=e.response?e.response.resultData:""})),0==t.length&&(a[r.props.id]=""),r.props.uploadchange(a)},r.handleCancel=function(){r.setState({previewVisible:!r.state.previewVisible})},r.state={fileList:[]},r}return y()(a,[{key:"render",value:function(){Object(re.j)().accessToken;var e=this.state,t=e.previewImage,a=void 0===t?"":t,n=e.fileList,r=e.previewVisible,i={Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},o=j.a.createElement("div",null,j.a.createElement($.a,{type:"plus"}),j.a.createElement("div",{className:"ant-upload-text"},"Upload"));return j.a.createElement("div",null,j.a.createElement(Y.a,{action:"https://api.ohhmail.com/api/admin/menu_image_upload",listType:"picture-card",headers:i,fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=1?null:o),j.a.createElement(Q.a,{visible:r,footer:null,onCancel:this.handleCancel},j.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(D.Component);oe.defaultProps={},oe.contextType=T.a;var ce=oe;function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var pe=J.a.TreeNode,me=B.a.Item,fe=q.a.Option,de=l.a.TextArea,he=function(e){b()(a,e);var t=ue(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).beforeCallback=function(e,t){var a=r.context.rowData,n=void 0===a?{}:a,i="save_menu";n.id&&(e.id=n.id,i="edit_menu"),x.a.order[i](se({},e)).then((function(e){e&&(r.props.changeSearch(),r.context.toggleWin("Setting"))}))},r.uploadchange=function(e){r.props.form.setFieldsValue(se({},e))},r.onCancel=function(){r.context.toggleWin("Setting")},r.onChange=function(e){r.setState({formshow:!1,menutype:e},(function(){setTimeout((function(){r.setState({formshow:!0})}),1)}))},r.formchange=function(e,t,a){var n={};n=a?a.triggerNode.props.item:t.props.item;var i={name:"",name_cn:"",url:"",meta_title:"",meta_keyword:"",meta_description:""};for(var o in i)i[o]=n[o];r.props.form.setFieldsValue(se({},i))},r.state={},r}return y()(a,[{key:"componentDidMount",value:function(){this.context.rowData}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.context,a=t.rowData,n=void 0===a?{}:a,r=t.menutree,i=void 0===r?[]:r,o=t.categoryspager,c=void 0===o?[]:o,s=t.productlist,u=void 0===s?[]:s,p=this.state,m=p.formshow,f=void 0===m||m,d=p.menutype,h=void 0===d?n.menu_type?n.menu_type:2:d,g=1!=h,v=se({beforeCallback:this.beforeCallback,title:"导航菜单",method:x.a.save_message_sign,visible:this.context.Setting,onCancel:this.onCancel,form:this.props.form},this.context.batConfig);return j.a.createElement(K.ModalComp,v,j.a.createElement(B.a,{className:"bulletbox-form"},j.a.createElement("div",{className:"collapse-style",style:{padding:"20px"}},j.a.createElement(R.a,{style:{marginTop:"16px"}},j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"导航类型"},H.d),e("menu_type",{initialValue:n.menu_type?n.menu_type:2,rules:[{required:!0,message:'请选择导航类型" '}]})(j.a.createElement(q.a,{onChange:this.onChange},j.a.createElement(fe,{value:1},"自定义导航"),j.a.createElement(fe,{value:2},"商品分类"),j.a.createElement(fe,{value:3},"商品专题"))))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"上级导航"},H.d),e("pid",{initialValue:n.pid?n.pid:0,rules:[{required:!0,message:'请选择上级导航" '}]})(j.a.createElement(q.a,null,i.map((function(e){return j.a.createElement(fe,{value:e.id},e.name)})))))),2==h?j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"选择分类"},H.d),e("category_id",{initialValue:n.category_id?n.category_id:"",rules:[{required:!0,message:'请选择分类" '}]})(j.a.createElement(J.a,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,treeDefaultExpandAll:!0,treeNodeFilterProp:"title",onChange:this.formchange},c.map((function(e){return j.a.createElement(pe,{item:e,value:e.id,title:e.name,key:e.id},e.children&&0!=e.children.length?e.children.map((function(e){return j.a.createElement(pe,{item:e,value:e.id,title:e.name,key:e.id})})):"")})))))):"",3==h?j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"选择专题"},H.d),e("template_page_id",{initialValue:n.template_page_id?n.template_page_id:"",rules:[{required:!0,message:'请选择专题" '}]})(j.a.createElement(q.a,{onChange:this.formchange},u.map((function(e){return j.a.createElement(fe,{value:e.id,item:e},e.name)})))))):"",f?j.a.createElement("div",null,j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"名称"},H.d),e("name",{initialValue:n.name?n.name:"",rules:[{required:!0,message:'请输入名称" '}]})(j.a.createElement(l.a,{disabled:g})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"中文别名"},H.d),e("name_cn",{initialValue:n.name_cn?n.name_cn:""})(j.a.createElement(l.a,{disabled:g})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"导航链接"},H.d),e("url",{initialValue:n.url?n.url:"",rules:[{required:!0,message:'请输入导航链接" '}]})(j.a.createElement(l.a,{disabled:g})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"SEO标题"},H.d),e("meta_title",{initialValue:n.meta_title?n.meta_title:""})(j.a.createElement(l.a,{disabled:g})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"SEO关键字"},H.d),e("meta_keyword",{initialValue:n.meta_keyword?n.meta_keyword:""})(j.a.createElement(l.a,{disabled:g})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"SEO描述"},H.d),e("meta_description",{initialValue:n.meta_description?n.meta_description:""})(j.a.createElement(de,{disabled:g}))))):"",j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"图片上传"},H.d),e("image",{initialValue:n.image?n.image:""})(j.a.createElement(ce,{uploadchange:this.uploadchange})))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"是否突出"},H.d),e("is_highlight",{initialValue:n.is_highlight?n.is_highlight:0})(j.a.createElement(A.a.Group,null,j.a.createElement(A.a,{value:1},"是"),j.a.createElement(A.a,{value:0},"否"))))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"展示位置"},H.d),e("show_system",{initialValue:n.show_system?n.show_system:1})(j.a.createElement(A.a.Group,null,j.a.createElement(A.a,{value:1},"PC，Mobile "),j.a.createElement(A.a,{value:2},"PC"),j.a.createElement(A.a,{value:3},"Mobile"))))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"状态"},H.d),e("is_active",{initialValue:n.is_active?n.is_active+"":"1"})(j.a.createElement(A.a.Group,null,j.a.createElement(A.a,{value:"1"},"启用"),j.a.createElement(A.a,{value:"0"},"禁用"))))),j.a.createElement(N.a,{span:24},j.a.createElement(me,M()({label:"排序"},H.d),e("sort_order",{initialValue:n.sort_order?n.sort_order:""})(j.a.createElement(l.a,null))))))))}}]),a}(D.Component);he.defaultProps={},he.contextType=T.a;var ge=B.a.create()(he);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var ye=function(e){b()(a,e);var t=ve(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){},r.tablist=function(){},r.state={Checkboxdata:[]},r}return y()(a,[{key:"render",value:function(){var e=this,t=this.context.activeKey,a={config:[{title:"添加",onAuth:"add",noCheck:!0,method:"",onClick:function(){return e.context.toggleWin("list"==t?"Addlist":"Setting")}}],unicode:"",batConfig:this.context.batConfig};return j.a.createElement("div",{className:"action-bar"},j.a.createElement(R.a,{type:"flex",justify:"space-between",align:"middle",gutter:10},j.a.createElement(N.a,null,j.a.createElement(F.a,a))),this.context.Setting&&j.a.createElement(ge,{changeSearch:this.props.changeSearch}))}}]),a}(D.Component);ye.defaultProps={},ye.contextType=T.a;var Ee,be,_e,we=a(1493),Oe=a(1494);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var Pe,De=(be=Ee=B.a.create()(_e=function(e){b()(a,e);var t=Se(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={},r.handleFormData=function(e){r.props.changeSearch(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},r.state={},r}return y()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return j.a.createElement(Oe.a,{loading:this.props.loading,SearchConf:[{type:"input",labelConf:{name:"名称",key:"name"},span:6}],handleFormData:this.handleFormData})}}]),a}(D.Component))||_e,Ee.defaultProps={},be),je=a(1490);a(1705);function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=C()(e);if(t){var r=C()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}P.a.TabPane;var Ve=Object(je.a)({toolConfig:{list:{action:"get_menu_list"}}})(Pe=function(e){b()(a,e);var t=Re(a);function a(e,n){var r;g()(this,a),(r=t.call(this,e,n)).onBlur=function(e,t,a){e.target.value!=a&&x.a.order.menu_sort_order({id:t,sort_order:e.target.value}).then((function(e){e&&d.a.success("修改成功")}))},r.onChange=function(e,t){x.a.order.menu_active({id:t,is_active:e?1:0}).then((function(e){e&&d.a.success("修改成功")}))},r.morelink=function(e,t,a){var n="/"+e+"/"+a;r.props.goLink(n,{title:t})},r.componentDidMount=function(){r.props.changeSearch({}),x.a.order.get_menu_tree({}).then((function(e){if(e){var t=e.resultData||[];t.unshift({id:0,name:"顶级导航"}),r.setState({menutree:t})}})),x.a.order.product_theme_list({}).then((function(e){e&&r.setState({productlist:e.resultData})})),x.a.order.get_categorys_pager({}).then((function(e){e&&r.setState({categoryspager:e.resultData})}))},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.state.otherConfig,i=void 0===n?{}:n;i=m()({rowData:a},t,!r.state[t]),r.setState((e={},m()(e,t,!r.state[t]),m()(e,"otherConfig",i),m()(e,"rowData",a),e))},r.jumpPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",n=e+"/"+t+"/"+a,r=window.location.origin+"/#/"+n;window.open(r)},r.listdata=[],r.state={areaList:[],channel_contrast:[],listdata:[]};return r.columns=[{title:"导航名称",dataIndex:"name"},{title:"中文别名",dataIndex:"name_cn",render:function(e,t){return j.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},j.a.createElement("span",null,e),j.a.createElement("span",null,2!=t.show_system?j.a.createElement("i",{className:"iconfont shop_ziyuan24",style:{color:"#4486F7",fontSize:"24px"}}):"",3!=t.show_system?j.a.createElement("i",{className:"iconfont shop_ziyuan25",style:{color:"#4486F7",fontSize:"24px"}}):""))}},{title:"状态",dataIndex:"is_active",width:100,render:function(e,t){return j.a.createElement(u.a,{defaultChecked:1==e,onChange:function(e){return r.onChange(e,t.id)}})}},{title:"排序",dataIndex:"sort_order",width:100,render:function(e,t){return j.a.createElement(l.a,{disabled:-1==t.manager_id,defaultValue:e,onBlur:function(a){return r.onBlur(a,t.id,e)}})}},{title:"操作",dataIndex:"id",width:300,fixed:"right",render:function(e,t){return-1==t.manager_id?"默认邮箱不允许修改":j.a.createElement(F.a,(a=t,{config:[{title:"编辑",onAuth:"add",noCheck:!0,onClick:function(){return r.toggleWin("Setting",a)}},{title:"删除",onAuth:"add",noCheck:!0,type:"danger",method:"POST /api/admin/delete_menu"}],batConfig:r.props.batConfig,rowData:a,paramData:{id:a.id}}));var a}}],r}return y()(a,[{key:"render",value:function(){var e=this.state,t=e.channel_contrast,a=e.rowData,n=e.menutree,i=void 0===n?[]:n,c=e.categoryspager,l=void 0===c?[]:c,s=e.productlist,u=void 0===s?[]:s,p=ke({columns:this.columns},this.props.tableConfig);o()(this.props);var m=ke(ke({},this.state.otherConfig),{},{toggleWin:this.toggleWin,jumpPage:this.jumpPage,batConfig:this.props.batConfig,channel_contrast:t,changeSearch:this.props.changeSearch,rowData:a,menutree:i,categoryspager:l,productlist:u});return j.a.createElement("div",{className:"tabSwitching"},j.a.createElement("div",{className:"userStyle listStyle"},j.a.createElement(T.a.Provider,{value:m},j.a.createElement(De,{changeSearch:this.props.changeSearch,channel_contrast:t}),j.a.createElement("div",{className:"header-tool"},j.a.createElement("p",null,"导航菜单"),j.a.createElement(ye,{changeSearch:this.props.changeSearch,values:this.props.values})),j.a.createElement(r.a,{className:"content-main"},j.a.createElement("div",{className:"content-table"},j.a.createElement(we.a,p))))))}}]),a}(D.Component))||Pe}}]);