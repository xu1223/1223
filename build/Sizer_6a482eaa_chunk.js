(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1529:function(e,t,n){},1768:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return G}));n(1491);var a=n(1492),r=n.n(a),i=n(3),o=n.n(i),l=(n(1495),n(1496)),c=n.n(l),s=(n(73),n(30)),u=n.n(s),d=(n(88),n(39)),p=n.n(d),f=n(25),m=n.n(f),h=n(20),v=n.n(h),g=n(90),y=n.n(g),E=n(26),b=n.n(E),C=n(22),D=n.n(C),k=n(16),S=n.n(k),_=n(1),w=n.n(_),O=n(55),x=(n(44),n(10)),j=(n(190),n(87)),P=n.n(j),R=(n(122),n(42)),I=n.n(R),N=(n(284),n(218)),L=n(1489);n(24);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D()(this,n)}}var M=function(e){b()(n,e);var t=V(n);function n(e,a){var r;return m()(this,n),(r=t.call(this,e,a)).state={},r}return v()(n,[{key:"render",value:function(){var e=this,t={config:[{title:"新增",noAuth:"add",noCheck:!0,onClick:function(){return e.context.Jumppage("","add")}},{title:"删除",noAuth:"del",type:"danger",method:O.a.del_filter,unicode:"ids|id"}],method:"",unicode:"ids|id",batConfig:this.context.batConfig};return w.a.createElement("div",{className:"action-bar"},w.a.createElement(P.a,{type:"flex",justify:"space-between",align:"middle",gutter:10},w.a.createElement(I.a,null,w.a.createElement(L.a,t))))}}]),n}(_.Component);M.defaultProps={},M.contextType=N.a;var z,J,F,q=n(1493),A=n(1490);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D()(this,n)}}var G=(J=z=Object(A.a)({toolConfig:{list:{action:"get_filter_pager",params:{}}}})(F=function(e){b()(n,e);var t=W(n);function n(e,a){var r;m()(this,n),(r=t.call(this,e,a)).state={},r.componentDidMount=function(){r.props.changeSearch()},r.onSwitch=function(e,t){Object(x.b)(O.a.save_filter_list,{id:e.id,status:t?1:0}).then((function(e){e&&(p.a.success(e.msg),r.props.changeSearch())}))},r.onPressEnterInput=function(e){Object(x.b)(O.a.save_filter_list,{id:e.id,sort_order:r.state.inpValu}).then((function(e){e&&r.props.changeSearch()}))},r.switchChange=function(e,t){var n=e?"1":"2";Object(x.b)(O.a.user_manager_edit,{id:t.id,status:n}).then((function(e){e&&(p.a.success(e.resultMsg),r.props.changeSearch())}))},r.Jumppage=function(e,t){var n=["Sizerporedit"];e?(n.push(e),n.push(t)):(n.push("add"),n.push(t)),r.props.goLink({pathname:"/".concat(n.join("/")),query:{}},{type:t})};return r.columns=[{title:"筛选器组名称",dataIndex:"name"},{title:"筛选器组别称",dataIndex:"alias"},{title:"筛选值",dataIndex:"value",render:function(e,t){return w.a.createElement("div",null,e.join("; "))}},{title:"排序",dataIndex:"sort_order",render:function(e,t){return w.a.createElement("div",null,w.a.createElement(u.a,{onChange:r.handelChange.bind(y()(r)),onBlur:function(){return r.onPressEnterInput(t)},defaultValue:e}))}},{title:"操作",dataIndex:"operation",width:300,fixed:"right",render:function(e,t){return w.a.createElement("div",{style:{display:"flex"}},w.a.createElement(c.a,{onChange:function(e){return r.onSwitch(t,e)},checkedChildren:"启用",unCheckedChildren:"禁用",defaultChecked:1==t.status}),w.a.createElement(L.a,(n=t,{config:[{title:"编辑",noAuth:"edit",noCheck:!0,ghost:!0,onClick:function(){return r.Jumppage(n.id,"edit")}},{title:"复制",noAuth:"detail",noCheck:!0,ghost:!0,onClick:function(){return r.Jumppage(n.id,"copy")}}],method:"",unicode:"ids|id",batConfig:r.props.batConfig,rowData:n})));var n}}],r}return v()(n,[{key:"handelChange",value:function(e){this.setState({inpValu:e.target.value})}},{key:"render",value:function(){var e=T({columns:this.columns},this.props.tableConfig),t=T(T({api:O.a,selectedRows:this.props.selectedRows,Jumppage:this.Jumppage},this.state.otherConfig),{},{batConfig:this.props.batConfig,deleteButton:this.deleteButton,searchValues:this.state.searchValues});return w.a.createElement("div",{className:"userStyle"},w.a.createElement(N.a.Provider,{value:t},w.a.createElement("div",{className:"header-tool"},w.a.createElement("p",null,"筛选器组"),w.a.createElement(M,null)),w.a.createElement(r.a,{className:"content-main"},w.a.createElement("div",{className:"content-table"},w.a.createElement(q.a,e)))))}}]),n}(_.Component))||F,z.defaultProps={},J)},1776:function(e,t,n){"use strict";n.r(t);n(190);var a=n(87),r=n.n(a),i=(n(122),n(42)),o=n.n(i),l=n(28),c=n.n(l),s=(n(73),n(30)),u=n.n(s),d=(n(88),n(39)),p=n.n(d),f=n(3),m=n.n(f),h=n(25),v=n.n(h),g=n(20),y=n.n(g),E=n(26),b=n.n(E),C=n(22),D=n.n(C),k=n(16),S=n.n(k),_=(n(89),n(40)),w=n.n(_),O=(n(121),n(45)),x=n.n(O),j=(n(82),n(41)),P=n.n(j),R=n(1),I=n.n(R),N=(n(1529),n(218),n(55)),L=n(10),V=null;function M(e){var t=e.children;return I.a.createElement("div",null,t.map((function(t,n){return I.a.isValidElement(t)?I.a.cloneElement(t,{draggable:"true",onDragStart:function(){V=n},onDragEnter:function(){!function(t,n){if(t!==n){var a,r,i,o,l=e.data,c=(r=t,i=n,o=(a=[].concat(a=l)).splice(r,1)[0],a.splice(i,0,o),a);"function"==typeof e.onChange&&e.onChange(c,t,n)}}(V,n),V=n},onDragEnd:function(){V=null,"function"==typeof e.onDragEnd&&e.onDragEnd()}}):t})))}var z=n(1489),J=n(267),F=n(59);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D()(this,n)}}Object(J.b)(P.a);var A=x.a.Item,B=w.a.Option,T=function(e){b()(n,e);var t=q(n);function n(e,a){var r;return v()(this,n),(r=t.call(this,e,a)).state={},r.handleDragMove=function(e,t,n){r.setState({curMoveItem:n,list:e})},r.handleDragEnd=function(){r.setState({curMoveItem:null})},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",n=arguments.length>1?arguments[1]:void 0;r.setState((e={},m()(e,t,!r.state[t]),m()(e,"otherConfig",n),e))},r.onChange=function(e,t){"topic"==e?r.setState({disabled:!0}):r.setState({disabled:!1})},r.keySelect=function(e,t){var n=r.state.param_option_list,a="";n.map((function(t,n){t.name==e&&(a=n)})),r.setState({list:[],option_value_list:n[a].option_value_list})},r.addtable=function(){for(var e=r.state.list,t=0;t<e.length;t++)if(!e[t])return p.a.error("筛选值不能为空"),!1;e.push(""),r.setState({list:e})},r.DragSortSelect=function(e,t){for(var n=r.state.list,a=0;a<n.length;a++)if(n[a]==e)return p.a.error("筛选值不能重复"),!1;n[t]=e},r.saveData=function(){(0,r.props.form.validateFields)((function(e,t){if(!e){var n=r.state,a=n.list,i=n.type,o=n.initData,l=t;l.filter_value=a.toString(),"edit"==i&&(l.id=o.id),Object(L.b)(N.a.save_filter,l).then((function(e){200==e.resultId?(p.a.success(e.resultMsg),r.goLink()):p.a.error("参数错误")}))}}))},r.goLink=function(){r.props.goLink({pathname:"/sizer"})},r.state={loading:!1,initData:{},disabled:!1,param_option_list:[],option_value_list:[],list:[],curMoveItem:null,type:""},r.columns=[{title:"筛选值名称",dataIndex:"name",render:function(e,t){return I.a.createElement("div",null,e)}},{title:"操作",dataIndex:"id",render:function(e,t){return I.a.createElement("div",null,e)}}],r}return y()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params,n=t.id,a=t.type;"add"!=n&&Object(L.b)(N.a.get_filter,{id:n}).then((function(t){if(t){var n="";n="edit"==a?t.resultData:{type:t.resultData.type,key:t.resultData.key,value:t.resultData.value},e.setState({initData:n,list:t.resultData.value,type:a})}})),Object(L.b)(N.a.get_param_option_list).then((function(t){if(t){var n=t.resultData;if(e.setState({param_option_list:n}),"edit"==a||"copy"==a)for(var r=0;r<n.length;r++)if(n[r].name==e.state.initData.key)return e.setState({option_value_list:n[r].option_value_list}),!1}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.initData,a=t.param_option_list,i=t.option_value_list,l=t.list,s=t.curMoveItem,d=this.props.form.getFieldDecorator;return I.a.createElement("div",null,I.a.createElement("div",{className:"productEditWrap content-main",style:{height:"800px",paddingTop:"20px"}},I.a.createElement(x.a,{className:"resetFormStyle",style:{marginTop:"20px",overflow:"hidden"}},I.a.createElement(r.a,null,I.a.createElement(o.a,{span:24},I.a.createElement(A,c()({label:"筛选器名称"},F.f),d("name",{initialValue:n.name||"",rules:[{required:!0,message:"请输入筛选器名称"}]})(I.a.createElement(u.a,null)))),I.a.createElement(o.a,{span:24},I.a.createElement(A,c()({label:"筛选器别称"},F.f),d("alias",{initialValue:n.alias||"",rules:[{required:!0,message:"请输入筛选器名称"}]})(I.a.createElement(u.a,null)))),I.a.createElement(o.a,{span:24},I.a.createElement(o.a,{span:4},I.a.createElement(A,c()({label:"筛选器类型"},{labelCol:{span:18},wrapperCol:{span:6}}),d("type",{initialValue:n.type||"option",rules:[{required:!0,message:"请输入筛选值"}]})(I.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",onChange:this.onChange,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},I.a.createElement(B,{value:"option"},"属性"),I.a.createElement(B,{value:"topic"},"专题"))))),I.a.createElement(o.a,{span:16},I.a.createElement(A,c()({label:""},F.f),d("filter_key",{initialValue:n.key||"",rules:[{required:!0,message:"请输入筛选值"}]})(I.a.createElement(w.a,{showSearch:!0,optionFilterProp:"children",disabled:this.state.disabled,onSelect:this.keySelect,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},a.map((function(e,t){return I.a.createElement(B,{key:t,value:e.name},e.name)}))))))),I.a.createElement(o.a,{span:24},I.a.createElement(A,c()({label:"筛选值"},F.f),I.a.createElement("div",{className:"sizer-table"},I.a.createElement("div",{className:"sizer-table-header"},I.a.createElement("p",null,"筛选值名称"),I.a.createElement("p",null,"操作")),I.a.createElement(M,{onDragEnd:this.handleDragEnd,onChange:this.handleDragMove,data:l},l.map((function(t,n){return I.a.createElement("div",{className:s===n?"sizer-table-item active":"sizer-table-item",key:t,onClick:function(){}},I.a.createElement("div",{className:"item"},I.a.createElement(w.a,{showSearch:!0,defaultValue:t,optionFilterProp:"children",onSelect:function(t){return e.DragSortSelect(t,n)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},i.map((function(e,t){return I.a.createElement(B,{key:e,value:e.name},e.name)})))),I.a.createElement("div",{className:"item"},I.a.createElement(z.a,function(t,n){return{config:[{title:"删除",noCheck:!0,type:"danger",ghost:!0,onClick:function(){var t=e.state.list.slice();t.splice(n,1),e.setState({list:t})}}],method:"",unicode:"ids|id",batConfig:{},rowData:t}}({},n))))}))),I.a.createElement("a",{className:"sizer-add",onClick:function(){return e.addtable()}},"添加数据"))))))),I.a.createElement("div",{className:"bottom-button-main"},I.a.createElement(P.a,{type:"primary",shape:"round",onClick:this.saveData,size:"large"},"保存"),I.a.createElement(P.a,{type:"primary",style:{background:"#C8C8C8",border:"1px solid #C8C8C8"},onClick:function(){return e.goLink()},shape:"round",size:"large"},"取消")))}}]),n}(R.Component);T.defaultProps={};t.default=x.a.create()(T)}}]);