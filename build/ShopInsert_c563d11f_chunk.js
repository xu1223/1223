(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1527:function(e,t,a){},1528:function(e,t,a){},1571:function(e,t,a){var n=a(748),r=a(750),i=a(388),o=a(749);e.exports=function(e){return n(e)||r(e)||i(e)||o()}},1572:function(e,t,a){e.exports=a.p+"./drop-icon.png?2772ebc16daacab9b5d9da96af54d4fb"},1733:function(e,t,a){"use strict";a.r(t);a(1502);var n=a(1503),r=a.n(n),i=(a(121),a(45)),o=a.n(i),s=(a(82),a(41)),l=a.n(s),c=(a(88),a(39)),u=a.n(c),p=a(53),d=a.n(p),m=a(3),f=a.n(m),h=a(25),g=a.n(h),y=a(20),v=a.n(y),_=a(26),b=a.n(_),E=a(22),S=a.n(E),w=a(16),k=a.n(w),C=(a(374),a(220)),O=a.n(C),x=a(1),D=a.n(x),P=a(218),j=[{id:"1",name:"基本信息",status:"1",key:"1",icon:" iconfont shop_ziyuan13"},{id:"2",name:"商品属性",status:"2",key:"2",icon:"close-circle"},{id:"3",name:"商品图片",status:"3",key:"3",icon:"check-circle"},{id:"4",name:"SEO设置",status:"4",key:"4",icon:"check-circle"},{id:"5",name:"商品关联",status:"5",key:"5",icon:"check-circle"},{id:"6",name:"批发设置",status:"6",key:"6",icon:"check-circle"}],T=(a(1491),a(1492)),I=a.n(T),z=(a(190),a(87)),A=a.n(z),N=(a(122),a(42)),R=a.n(N),V=a(28),M=a.n(V),F=(a(73),a(30)),q=a.n(F),U=(a(81),a(18)),Y=a.n(U),K=(a(735),a(379)),L=a.n(K),H=(a(89),a(40)),W=a.n(H),B=a(59),G=a(1498),J=(a(751),a(275),a(123),a(51)),Q=a.n(J),$=a(34),Z=a.n($),X=a(754),ee=a.n(X),te=a(752),ae=a.n(te),ne=a(753),re=a.n(ne);function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tipInfo";return"tipSuccess"==e?ee.a:"tipDel"===e?ae.a:"tipInfo"===e?re.a:void 0},le=function(e,t){var a=e.split(t)[0],n=e.substring(a.length).substr(1);return n.substring(0,n.length-1)},ce=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.title,n=t.content,r=t.imgType,i=t.className,o=t.okText,s=t.cancelText,l=t.icon,c=t.type,u=void 0===c?"confirm":c,p=t.imgSrc,d=void 0===p?"":p,m=t.isImg,f=void 0===m||m,h=Z()(t,["title","content","imgType","className","okText","cancelText","icon","type","imgSrc","isImg"]),g=d||se(r);l&&(e=D.a.createElement("i",{className:"iconfont ".concat(l&&l)}));var y=oe(oe({className:i||"window-container",icon:e,closable:!0,title:a||"标题title",okText:o||"确认",cancelText:s||"取消",destroyOnClose:!0,maskClosable:!0},h),{},{content:D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"pos-img",style:{display:f?"block":"none"}},D.a.createElement("img",{src:g||ee.a})),n||"")});Q.a[u&&u||"confirm"](y)},ue=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type,n=void 0===a?"info":a,r=t.content,i=void 0===r?"内容提示":r,o=t.timer,s=void 0===o?3:o,l=t.icon,c=t.iconColor,p=void 0===c?"#4486F7":c;l&&(e=D.a.createElement("i",{className:"iconfont  ".concat(l&&l),style:{color:p}})),u.a[n]({content:i,duration:s,icon:e})},pe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_",r=[],i=0;i<e;i++)!function(e){var i={};for(var o in a)for(var s=le(a[o],n),l=0;l<t.length;l++)l===e&&(i[s]=t[l][a[o]+l]);r.push(i)}(i);return r},de=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[],r=function(e){!function(r){var i,o,s={};for(var l in t)for(var c in o=(i=(t[l]+e).split("_"))[i.length-1].toString(),a)t[l]+e==c&&parseInt(o)==parseInt(e)&&(s[t[l]+e]||(s[t[l]+e]=a[c]));n.push(s)}()},i=0;i<e;i++)r(i);return n},me=function(e,t){return e[t]?e[t]:""},fe=(a(221),a(125)),he=a.n(fe),ge=(a(282),a(223)),ye=a.n(ge),ve=a(1571),_e=a.n(ve);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Ee=function(e){b()(a,e);var t=be(a);function a(){var e,n;g()(this,a);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return S()(n,(e=n=t.call.apply(t,[this].concat(i)),n.state={value:n.props.value,editable:!1},n.handleChange=function(e){var t=e.target.value;n.setState({value:t})},n.check=function(){n.setState({editable:!1}),n.props.onChange&&n.props.onChange(n.state.value)},n.edit=function(){n.setState({editable:!0})},n.validForm=function(e,t,a){e.field;-1==t.indexOf(n.validCode)?a("只能含有数字、字母和下划线"):a()},e))}return v()(a,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.editable;return D.a.createElement("div",{className:"editable-cell"},a?D.a.createElement("div",{className:"editable-cell-input-wrapper"},D.a.createElement(q.a,{value:t,onChange:this.handleChange,onPressEnter:this.check}),D.a.createElement(Y.a,{type:"check",className:"editable-cell-icon-check",style:{fontSize:18,color:"#08c",top:6},onClick:this.check})):D.a.createElement("div",{className:"editable-cell-text-wrapper"},t||" ",D.a.createElement(Y.a,{type:"edit",className:"editable-cell-icon",style:{fontSize:18,color:"#08c",top:9},onClick:this.edit})))}}]),a}(D.a.Component),Se=(a(67),a(116)),we=a(78),ke=a.n(we);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}D.a.Component;var De=a(1494),Pe=a(1493),je=a(219),Te=(a(44),a(5)),Ie=a.n(Te),ze=a(10);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}(function(e){b()(a,e);var t=Ae(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={curTime:Ie()().format("YYYY-MM-DD HH:mm:ss")},r}return v()(a,[{key:"componentDidMount",value:function(){var e=this;Object(ze.b)("/home/index/getServerTime").then((function(t){var a=t.resultData.data,n=0;e.setState({curTime:Ie()(a[0]).add(1,"s").format("YYYY-MM-DD HH:mm:ss")}),e.setTime=setInterval((function(){n++,e.setState({curTime:Ie()(a[0]).add(n,"s").format("YYYY-MM-DD HH:mm:ss")})}),1e3)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.setTime)}}]),v()(a,[{key:"render",value:function(){return D.a.createElement("span",null,this.state.curTime)}}]),a}(x.Component)).defaultProps={};a(281),a(113),a(283),a(160),a(191),a(114),a(378);var Ne=a(126),Re=a.n(Ne),Ve=(a(732),a(375)),Me=a.n(Ve);var Fe,qe,Ue;o.a.Item,W.a.Option,q.a.Group,Me.a.Group,Re.a.MonthPicker,Re.a.RangePicker;function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var He,We,Be,Ge=o.a.Item,Je=je.ModalComp,Qe=(qe=Fe=o.a.create()(Ue=function(e){b()(a,e);var t=Le(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).addCol=function(){var e=r.props,t=e.form,a=e.curColumnsName,n=e.isEdit;t.validateFieldsAndScroll((function(e,t){if(!e){var i=t.name;n?r.props.resetColDataSource(a,i):a?r.props.addThHandle(a,"",i):r.props.addThHandle("","isTool",i),r.props.handleCancel()}}))},r.validForm=function(e,t,a){e.field;var n=r.props,i=n.columns,o=n.isEdit,s=n.curColumnsName;-1!=i.findIndex((function(e){return e.dataIndex==t}))?o&&t==s?a():a("列名必须唯一；如果同时使用相同的列名，请使用'|'来进行区别，如Size|2"):a()},r.state={},r}return v()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.curColumnsName,a=e.isEdit,n=Ke(Ke({title:(a?"修改":"新增")+"列名",winType:1},this.props),{},{onCancel:this.props.handleCancel,onOk:this.addCol}),r=this.props.form.getFieldDecorator;return D.a.createElement(Je,n,D.a.createElement("div",{style:{margin:"30px"}},D.a.createElement(Ge,null,r("name",{initialValue:a?t:"",rules:[{required:!0,message:"必填项"},{validator:this.validForm}]})(D.a.createElement(q.a,{placeholder:"请输入列名"})))))}}]),a}(x.Component))||Ue,Fe.defaultProps={},qe),$e=a(90),Ze=a.n($e),Xe=a(69),et=a.n(Xe),tt=a(55);function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}We=He=o.a.create()(Be=function(e){b()(a,e);var t=at(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={},r.getManagerNameList=function(){Object(ze.b)(tt.a.get_manager_list,{}).then((function(e){var t=e.resultData;r.setState({managerNameList:t})}))},r.handleFormData=function(e){var t=e.range_time||[],a=et()(t,2),n=a[0],i=a[1];e.date_start=n&&Ie()(n).format("YYYY-MM-DD HH:mm:ss")||"",e.date_end=i&&Ie()(i).format("YYYY-MM-DD HH:mm:ss")||"",delete e.range_time,r.props.changeSearch(e)},r}return v()(a,[{key:"componentDidMount",value:function(){this.getManagerNameList()}},{key:"render",value:function(){var e=[{labelConf:{name:"模板标题",key:"name"},type:"input"},{labelConf:{name:"编辑者",key:"manager_id"},data:this.state.managerNameList||[],renderOption:function(e){return D.a.createElement(Option,{key:e.id,value:e.id},e.name)}},{labelConf:{name:"保存时间",key:"range_time"},span:12,type:"range",format:"YYYY-MM-DD HH:mm:ss",showTime:!0}],t={handleFormData:this.handleFormData,form:this.props.form,SearchConf:e,loading:this.props.loading};return D.a.createElement(De.a,t)}}]),a}(x.Component))||Be,He.defaultProps={};var nt,rt,it,ot=a(380);function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var ct,ut,pt,dt=je.ModalComp,mt=(je.Confirm,rt=nt=o.a.create()(it=function(e){b()(a,e);var t=lt(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={},r.beforeCallback=function(){var e=r.props,t=e.api,a=e.initData,n=Ze()(r),i=r.setStateSizeTable(r.sizeGuide.state.columns,r.sizeGuide.state.tableData);ce({title:"是否确认修改？",content:"确定后不可撤销",icon:"1",onOk:function(){var e={};e.template_id=a.id,e.name=a.name,e.account_id=ot.a.getItem("manager_id"),e.size_chart=JSON.stringify(i),Object(ze.b)(t.save_size_template,e).then((function(e){200==parseInt(e.resultId)?(u.a.success(e.resultMsg),n.props.handleCancel(),n.props.accessToTheTemplate()):u.a.error(e.resultMsg)}))}})},r.setStateSizeTable=function(e,t){var a=[],n=[],r=[];return e&&e.map((function(e){var t=e.dataIndex;-1!=t.indexOf("|")&&(t=t.split("|")[0]),r.push(e.dataIndex),n.push(t)})),a.push(n),t.map((function(e,t){var n=[];r.map((function(t){n.push(e[t]||"")})),a.push(n)})),a},r}return v()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.initData,n=void 0===a?{}:a,r=t.isEdit,i=t.form,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({beforeCallback:this.beforeCallback,title:r?"编辑模板":"查看模板",onCancel:this.props.handleCancel,okText:"保存",width:1e3},this.props);return!r&&(o.footer=!1),D.a.createElement(dt,o,D.a.createElement("div",{style:{marginLeft:20,marginRight:20,marginBottom:20}},D.a.createElement(It,M()({ref:function(t){return e.sizeGuide=t}},this.props,{form:i,initData:n,isEditPager:!1,isEditPagerEdit:!!r,setStateSizeTable:this.setStateSizeTable}))))}}]),a}(x.Component))||it,nt.defaultProps={},rt),ft=a(1490);function ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}function gt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function yt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var vt,_t,bt,Et=je.ModalComp,St=(ut=ct=Object(ft.a)(yt({},{toolConfig:{list:{action:"get_size_template_pager"}}}))(pt=function(e){b()(a,e);var t=ht(a);function a(e,n){var r;g()(this,a),(r=t.call(this,e,n)).accessToTheTemplate=function(){Object(ze.b)(tt.a.get_size_template_pager).then((function(e){e.code,e.data;200==e.resultId&&r.setState({dataSource:e.resultData.data,loading:!1})}))},r.delect=function(e){var t=Ze()(r);ce({title:"操作提示",content:"是否确认删除？",icon:"123",onOk:function(){var a=this;Object(ze.b)(tt.a.del_size_template,{template_id:e.id}).then((function(e){u.a.success("操作成功"),t.props.changeSearch(),a.accessToTheTemplate()}))}})},r.addSizeModal=function(){var e=r.props.selectedRows;1!=e.length?u.a.error("请勾选一个尺码模板进行操作"):(r.props.changeSizeModal(e[0]),r.props.handleCancel())},r.handleCancel=function(){r.setState({editVisible:!1})},r.state={sortedInfo:{},dataSource:[],loading:!0,editVisible:!1,initData:{},isEdit:!1};var i={fontSize:20,marginLeft:10};return r.columns=[{title:"序号",dataIndex:"id",width:80},{title:"模板标题",dataIndex:"name",width:100},{title:"编辑者",dataIndex:"manager_name",width:100},{title:"保存时间",dataIndex:"created_at",width:120},{title:"操作",dataIndex:"key",width:120,render:function(e,t,a){return D.a.createElement("div",null,D.a.createElement(Y.a,{type:"eye",style:i,onClick:function(){return r.setState({editVisible:!0,initData:t,isEdit:!1})}}),D.a.createElement(Y.a,{type:"edit",style:i,onClick:function(){return r.setState({editVisible:!0,initData:t,isEdit:!0})}}),D.a.createElement(Y.a,{type:"delete",style:i,onClick:function(){return r.delect(t)}}))}}],r}return v()(a,[{key:"componentDidMount",value:function(){this.props.changeSearch(),this.accessToTheTemplate()}}]),v()(a,[{key:"render",value:function(){yt({},this.props.searchConfig);var e=yt(yt({columns:this.columns},this.props.tableConfig),{},{dataSource:this.state.dataSource,loading:this.state.loading}),t=yt(yt({title:"获取模板",winType:3},this.props),{},{onCancel:this.props.handleCancel,okText:"提交",onOk:this.addSizeModal});return D.a.createElement(Et,t,D.a.createElement("div",{className:"restTabStyle "},D.a.createElement("div",{className:"main-content"},D.a.createElement(Pe.a,e))),this.state.editVisible?D.a.createElement(mt,M()({visible:this.state.editVisible,handleCancel:this.handleCancel,initData:this.state.initData,isEdit:this.state.isEdit,api:tt.a,accessToTheTemplate:this.accessToTheTemplate},this.props)):null)}}]),a}(x.Component))||pt,ct.defaultProps={},ut);function wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function kt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Ot=o.a.Item,xt=je.ModalComp,Dt=(_t=vt=o.a.create()(bt=function(e){b()(a,e);var t=Ct(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).beforeCallback=function(){var e=r.props,t=e.saveSizeData,a=e.form,n=e.api,i={template_id:""};i.name=a.getFieldValue("name"),i.account_id=ot.a.getItem("USER_UUID"),i.size_chart=JSON.stringify(t),Object(ze.b)(n.save_size_template,i).then((function(e){"200"==e.resultId?(u.a.success(e.resultMsg),r.props.handleCancel()):u.a.error(e.resultMsg)}))},r.state={},r}return v()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=kt(kt({title:"保存模板",winType:1},this.props),{},{onCancel:this.props.handleCancel,onOk:this.beforeCallback}),t=this.props.form.getFieldDecorator;return D.a.createElement(xt,e,D.a.createElement("div",{style:{margin:"30px"}},D.a.createElement(Ot,M()({label:"模板标题"},B.a),t("name",{initialValue:"",rules:[{required:!0,message:"必填项"},{validator:this.validForm}]})(D.a.createElement(q.a,{placeholder:"建议模板标题清晰明确，避免混淆"})))))}}]),a}(x.Component))||bt,vt.defaultProps={},_t);function Pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var It=function(e){b()(a,e);var t=Tt(a);function a(e){var n;return g()(this,a),(n=t.call(this,e)).changeSizeModal=function(e){var t,a=e?e.size_chart:[],r=_e()(a),i=r[0],o=r.slice(1);(t=n).setStateDataSource.apply(t,[i].concat(d()(o)))},n.setStateSizeTable=function(e,t){var a=[],n=[],r=[];return e&&e.map((function(e){var t=e.dataIndex;-1!=t.indexOf("|")&&(t=t.split("|")[0]),r.push(e.dataIndex),n.push(t)})),a.push(n),t.map((function(e,t){var n=[];r.map((function(t){n.push(e[t]||"")})),a.push(n)})),a},n.setStateDataSource=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=n.props.setStateSizeTable,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];var o=[].concat(r),s=[],l=[],c=[];e.map((function(e,t){var a=e;l.includes(a)&&(a+="|"+t),s.push({title:n.renderTitle(a),dataIndex:a,width:100,render:function(e,t,r){return n.renderColumns(e,t,a)}}),l.push(a)})),o.map((function(e,t){var a={};e.map((function(e,t){a[l[t]]=e})),a.key=n.getUnicodeKey()+t,c.push(a)}));var u={tableData:c};s.length>0&&(u.columns=s),n.setState(jt({},u));var p=t(u.columns,u.tableData);n.props.sizeChartBind(p)},n.addThHandle=function(e,t,a){var r=n.state.columns,i={title:n.renderTitle(a),dataIndex:a,width:100,render:function(e,t,r){return n.renderColumns(e,t,a)}},o=r.length;if("isTool"!=t){o=r.findIndex((function(t){return t.dataIndex==e}));var s=[];r.map((function(e,t){s.push(e),t==o&&s.push(i)})),r=s}else r.splice(o+1,0,i);n.setState({columns:r},(function(){}))},n.delThHandle=function(e){var t=n.state,a=t.columns,r=t.tableData,i=a.findIndex((function(t){return t.dataIndex==e}));a.splice(i,1),n.setState({columns:a});var o=n.props.setStateSizeTable(a,r);n.props.sizeChartBind(o)},n.delTdHandle=function(e,t){var a=n.state,r=a.tableData,i=a.columns;r=r.filter((function(t){return t.key!==e.key})),n.setState({tableData:r});var o=n.props.setStateSizeTable(i,r);n.props.sizeChartBind(o)},n.onCellChange=function(e,t,a){var r=n.state,i=r.tableData,o=r.columns,s=i.findIndex((function(t){return t.key==e.key}));i[s][a]=t,n.setState({tableData:i});var l=n.props.setStateSizeTable(o,i);n.props.sizeChartBind(l)},n.resetColDataSource=function(e,t){var a=n.state,r=a.tableData,i=a.columns,o={title:n.renderTitle(t),dataIndex:t,width:100,render:function(e,a,r){return n.renderColumns(e,a,t)}},s=i.findIndex((function(t){return t.dataIndex==e}));r.map((function(a){a[t]=a[e],delete a[e]})),i.splice(s,1,o);var l=n.props.setStateSizeTable(i,r);n.props.sizeChartBind(l),n.setState({columns:i,tableData:r})},n.renderColumns=function(e,t,a){var r=D.a.createElement("div",{className:"fix-div"},D.a.createElement(l.a,{type:"primary",onClick:function(e){return n.addTdHandle(t)}},"添加行"),D.a.createElement(l.a,{type:"danger",onClick:function(e){return n.delTdHandle(t)}},"删除行"));return D.a.createElement(ye.a,{content:r,placement:"topRight",trigger:"hover"},D.a.createElement("a",null,D.a.createElement(Ee,{value:e,onChange:function(e){return n.onCellChange(t,e,a)}})))},n.handleCancel=function(){n.setState({importVisible:!1,copyVisible:!1,editColVisible:!1,sizeTemVisible:!1,saveSizeVisible:!1})},n.renderTitle=function(e){var t=D.a.createElement("div",{className:"fix-div"},D.a.createElement(l.a,{type:"primary",onClick:function(){return n.setState({editColVisible:!0,curColumnsName:e,isEdit:!1})}},"添加列"),D.a.createElement(l.a,{type:"danger",onClick:function(t){return n.delThHandle(e)}},"删除列"));return D.a.createElement("div",{style:{position:"relative"}},D.a.createElement("div",{onClick:function(){return n.setState({editColVisible:!0,curColumnsName:e,isEdit:!0})},style:{textAlign:"left",paddingLeft:"30px"}},e),D.a.createElement(ye.a,{content:t,trigger:"hover"},D.a.createElement(Y.a,{type:"bars",style:{fontSize:24,left:0,top:0,color:"#08c",position:"absolute"}})))},n.getUnicodeKey=function(){return(new Date).getTime()},n.addTdHandle=function(e){var t=n.state.tableData,a={key:n.getUnicodeKey()};t.push(a),n.setState({tableData:t})},n.state=f()({editColVisible:!0,curColumnsName:"",isEdit:!1,sizeTemVisible:!1,saveSizeVisible:!1,columns:[],tableData:[]},"editColVisible",!1),n}return v()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.initData,n=t.sizeChartTable;if(a.id&&a.size_chart.length){var r=a.size_chart,i=void 0===r?[]:r,o=n||(i||[]),s=_e()(o),l=s[0],c=s.slice(1);i&&this.setStateDataSource.apply(this,[l].concat(d()(c)))}else this.setState({columns:[{title:this.renderTitle("Size"),dataIndex:"Size",width:100,render:function(t,a,n){return e.renderColumns(t,a,"Size")}}]})}},{key:"render",value:function(){var e=this,t={type:"primary",size:"small",className:"button-style-blue button-style-small",style:{margin:"0 6px"}},a=this.props,n=a.setStateSizeTable,r=a.isEditPager,i=a.isEditPagerEdit,o=this.state,s=o.tableData,c=void 0===s?[]:s,u=o.columns,p=void 0===u?[]:u,d=n(p,c);return D.a.createElement("div",{className:"restTabStyle",style:{marginTop:"10px"}},D.a.createElement(A.a,{type:"flex",justify:"space-between",align:"middle"},D.a.createElement(R.a,null,D.a.createElement("div",{style:{marginBottom:"10px"}},r||i?D.a.createElement(D.a.Fragment,null,D.a.createElement(l.a,M()({},t,{onClick:function(t){return e.addTdHandle()}}),"添加行"),D.a.createElement(l.a,M()({},t,{onClick:function(){return e.setState({editColVisible:!0,curColumnsName:"",isEdit:!1})}}),"添加列")):null,r?D.a.createElement(D.a.Fragment,null,D.a.createElement(l.a,M()({},t,{onClick:function(){return e.setState({sizeTemVisible:!0})}}),"获取模板"),D.a.createElement(l.a,M()({},t,{onClick:function(){return e.setState({saveSizeVisible:!0})}}),"保存为模板")):null))),D.a.createElement("div",{className:"sizeTable"},D.a.createElement(he.a,{columns:p,rowKey:"key",bordered:!0,pagination:!1,dataSource:c,onRowContextMenu:function(e,t,a){}})),this.state.editColVisible?D.a.createElement(Qe,{visible:this.state.editColVisible,handleCancel:this.handleCancel,addThHandle:this.addThHandle,columns:this.state.columns,curColumnsName:this.state.curColumnsName,resetColDataSource:this.resetColDataSource,isEdit:this.state.isEdit}):null,this.state.sizeTemVisible?D.a.createElement(St,M()({visible:this.state.sizeTemVisible,handleCancel:this.handleCancel,changeSizeModal:this.changeSizeModal},this.props)):null,this.state.saveSizeVisible?D.a.createElement(Dt,{api:tt.a,saveSizeData:d,visible:this.state.saveSizeVisible,handleCancel:this.handleCancel}):null)}}]),a}(x.Component);a(1527);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var At=o.a.Item,Nt=W.a.Option,Rt=(L.a.TreeNode,function(e){b()(a,e);var t=zt(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).synchronizationSku=function(e){var t=r.context,a=t.formFieldsName,n=t.dommodityAttribute;t.dommodityAttributefn;if(0===n.length)return ue({content:"请先选择分类填写SKU 添加属性数据",timer:5}),!1;var i=r.props.form.getFieldValue;if("show_price"===e){var o=i(a.show_price);n.forEach((function(e){e.show_price=o}))}else if("price"==e){var s=i(a.price);n.forEach((function(e){e.price=s}))}else if("weight"===e){var l=i(a.weight);n.forEach((function(e){e.weight=l}))}u.a.success("同步成功")},r.onChangegetTree=function(e){r.context.getCcategoryOptionValuefn(e)},r.onTagslist=function(e){return e instanceof Array?e.map((function(e,t){return D.a.createElement(Nt,{key:t,value:e.id},e.keyword)})):[]},r.skuFn=function(e){e.target.value?(r.context.isSkuVal(e.target.value),r.context.isSkufn(!0)):r.context.isSkufn(!1)},r.setStateSizeTable=function(e,t){var a=[],n=[],r=[];return e&&e.map((function(e){var t=e.dataIndex;-1!=t.indexOf("|")&&(t=t.split("|")[0]),r.push(e.dataIndex),n.push(t)})),a.push(n),t.map((function(e,t){var n=[];r.map((function(t){n.push(e[t]||"")})),a.push(n)})),a},r}return v()(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.form,n=t.rowData,i=t.sizeChartBind,o=t.sizeChartTable,s=t.size_stage,l=a.getFieldDecorator,c=this.context,u=(c.formFields,c.formFieldsName),p=c.getTreeCategorySimple,d=c.getCategorySearchData,m=c._parms,f=[];return m.product_searches&&m.product_searches.map((function(e){f.push(e.search_id)})),D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription",title:D.a.createElement("span",null,D.a.createElement(Y.a,{type:"file-text",theme:"filled"})," 基础信息")},D.a.createElement(r.a,{loading:!1,paragraph:{rows:10}},D.a.createElement(A.a,null,D.a.createElement(R.a,{span:8},D.a.createElement(At,M()({},B.c,{label:"SPU"}),l(u.model,{initialValue:m.spu?m.spu:"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))),D.a.createElement(R.a,{span:8},D.a.createElement(At,M()({},B.c,{label:"SKU"}),l(u.sku,{initialValue:me(m,"sku"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,{onChange:this.skuFn}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(At,M()({},B.b,{label:"商品名称:"}),l(u.name,{initialValue:me(m,"name"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,{width:"700px"}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16,className:"shops-info"},D.a.createElement(At,M()({},B.b,{label:"商品分类:"}),l(u.category_ids,{initialValue:m.categories?m.categories.child_category_id:"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(L.a,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,onChange:this.onChangegetTree,treeData:p}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:8,className:"basicdatga-icon"},D.a.createElement(At,M()({},B.c,{label:"实际售价:"}),l(u.price,{initialValue:me(m,"price")})(D.a.createElement(q.a,{addonAfter:"USD"})),D.a.createElement("i",{className:"iconfont order-ico-tuisong iconfontclick",onClick:function(){return e.synchronizationSku("price")},title:"同步到实际售价"}))),D.a.createElement(R.a,{span:8,className:"basicdatga-icon"},D.a.createElement(At,M()({},B.c,{label:"市场价 "}),l(u.show_price,{initialValue:me(m,"show_price")})(D.a.createElement(q.a,{addonAfter:"USD"})),D.a.createElement("i",{className:"iconfont order-ico-tuisong iconfontclick",onClick:function(){return e.synchronizationSku("show_price")},title:"同步到市场价"})))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:8,className:"basicdatga-icon shops-info"},D.a.createElement(At,M()({},B.c,{label:"商品标重"}),l(u.weight,{initialValue:me(m,"weight")})(D.a.createElement(q.a,{addonAfter:"KG"})),D.a.createElement("i",{className:"iconfont order-ico-tuisong iconfontclick",onClick:function(){return e.synchronizationSku("weight")},title:"同步到标重"}))),D.a.createElement(R.a,{span:8},D.a.createElement(At,M()({},B.c,{label:"材质 ："}),l(u.material,{initialValue:me(m,"material")})(D.a.createElement(q.a,null))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(At,M()({},B.b,{label:" 商品标签 ："}),l(u.product_searches,{initialValue:f})(D.a.createElement(W.a,{mode:"multiple"},this.onTagslist(d)))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:8,className:"shops-info"},D.a.createElement(At,M()({},B.c,{label:" 商品排序 ："}),l(u.sort_order,{initialValue:m.sort_order})(D.a.createElement(q.a,null)))),D.a.createElement(R.a,{span:8},D.a.createElement(At,M()({},B.c,{label:"最小起订量 ："}),l(u.minimum,{initialValue:me(m,"minimum")})(D.a.createElement(q.a,null)))))))),D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription",style:{marginTop:"10px"},title:D.a.createElement("span",null,D.a.createElement(Y.a,{type:"file-text",theme:"filled"})," 商品描述")},D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(At,M()({},B.b,{label:"产品描述"}),D.a.createElement(G.a,{initialFrameHeight:300,id:"wapcontainer1",richText:me(m,"description")})))))),D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription",style:{marginTop:"10px"},title:D.a.createElement("span",null,D.a.createElement(Y.a,{type:"file-text",theme:"filled"})," 商品尺寸信息")},D.a.createElement("div",{className:"shops-aded-size-tip"},"双击单元格可编辑；鼠标滑动至单元格边框可增加行、列"),D.a.createElement("div",null,o.length>0||s||!this.context.shoptype?D.a.createElement(It,M()({},this.props,{form:a,initData:n,isEditPager:!0,setStateSizeTable:this.setStateSizeTable,sizeChartBind:i,sizeChartTable:1==o?[]:o})):""))))}}]),a}(x.Component));Rt.contextType=P.a;a(382);var Vt=a(230),Mt=a.n(Vt),Ft=(a(1495),a(1496)),qt=a.n(Ft);function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Kt=o.a.Item,Lt=function(e){b()(a,e);var t=Yt(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).beforeCallback=function(e,t){var a=r.context.dommodityAttribute;if(0==a.length)return ue({content:"请先设置属性数据",timer:5}),!1;var n="^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$";return null==e.price.match(n)&&""!=e.price||null==e.show_price.match(n)&&""!=e.show_price?(ue({content:"您输入的金额有误",timer:5}),!1):null==e.weight.match(n)&&""!=e.weight?(ue({content:"您输入的重量有误",timer:5}),!1):null==e.quantity.match("^[0-9]*[1-9][0-9]*$")&&""!=e.quantity?(ue({content:"您输入的库存有误",timer:5}),!1):(a.map((function(t){e.zsku&&(t.zsku=e.zsku),e.price&&(t.price=e.price||0),e.show_price&&(t.show_price=e.show_price||0),e.weight&&(t.weight=e.weight||0),e.quantity&&(t.quantity=e.quantity||0),t.status=e.status?1:2})),r.props.commforceUpdate(r.props.this),void r.context.toggleWin("visibleAddress",{}))},r.onCancel=function(){r.context.toggleWin("visibleAddress",{})},r.state={},r}return v()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this,a=this.props.form.getFieldDecorator,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}((e={title:"子sku同步",winType:2,beforeCallback:this.beforeCallback,onCancel:this.onCancel,visible:this.context.visibleAddress},f()(e,"onCancel",this.onCancel),f()(e,"form",this.props.form),e),this.context.batConfig);return D.a.createElement(je.ModalComp,n,D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Kt,M()({},B.c,{label:"实际售价【 ＄ 】 ："}),a("price",{initialValue:""})(D.a.createElement(q.a,{onkeyup:function(){return t.clearNoNum(t)}}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Kt,M()({},B.c,{label:"市场价【 ＄ 】 ："}),a("show_price",{initialValue:""})(D.a.createElement(q.a,null))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Kt,M()({},B.c,{label:"重量【 KG 】 ："}),a("weight",{initialValue:""})(D.a.createElement(q.a,null))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Kt,M()({},B.c,{label:"库存 ："}),a("quantity",{initialValue:""})(D.a.createElement(q.a,null))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Kt,M()({},B.c,{label:"状态 ："}),a("status",{initialValue:""})(D.a.createElement(qt.a,{checkedChildren:"上架",unCheckedChildren:"下架"})),D.a.createElement("a",{href:"javascript:void(0);",style:{marginLeft:"10px"}},"定时上架"),D.a.createElement("div",{style:{float:"right"}},D.a.createElement("a",{href:"javascript:void(0);"},"23 小时 16 分钟 44 秒 "),D.a.createElement("span",{style:{clor:"#4F4F4F"}}," 后自动上架"))))))}}]),a}(x.Component);Lt.contextType=P.a;var Ht,Wt=o.a.create()(Object(Se.connect)((function(e){return{}}))(Lt)),Bt={id:"",tag_ids:"",name:"",description:"",tags:"",meta_title:"",meta_keyword:"",meta_description:"",template_suffix:"",sku:"",model:"",vendor:"",color:"",upc:"",material:"",ean:"",size:"",jan:"",isbn:"",published_scope:"",stock_policy:"",quantity:"",stock_status:"",source:"",weight:"",minimum:"",review_rating:"",url:"",click:"",show_price:"",price:"",sort_order:"",is_featured:"",is_hot:"",is_out:"",is_launch:"",is_publish:"",is_special:"",is_new:"",is_big:"",status:"1",category_ids:"",related_id:"",product_option:"",images:"",related_product:"",wholesale_settings:"",size_chart:""},Gt={id:"id",name:"name",option_value_name:"option_value_name",description:"description",product_searches:"tag_ids",meta_title:"meta_title",meta_keyword:"meta_keyword",meta_description:"meta_description",template_suffix:"template_suffix",sku:"sku",model:"model",vendor:"vendor",color:"color",upc:"upc",material:"material",ean:"ean",size:"size",jan:"jan",isbn:"isbn",published_scope:"published_scope",stock_policy:"stock_policy",quantity:"quantity",stock_status:"stock_status",source:"source",weight:"weight",minimum:"minimum",review_rating:"review_rating",url:"url",click:"click",show_price:"show_price",price:"price",sort_order:"sort_order",is_featured:"is_featured",is_out:"is_out",is_hot:"is_hot",is_launch:"is_launch",is_publish:"is_publish",is_special:"is_special",is_new:"is_new",is_big:"is_big",status:"status",category_ids:"category_ids",related_id:"related_id",product_option:"product_option",images:"images",related_product:"related_product",wholesale_settings:"wholesale_settings",customer_group_id:"customer_group_id",purchase_number_min:"purchase_number_min",purchase_number_max:"purchase_number_max",selling_price:"selling_price",date_start:"date_start",date_end:"date_end",size_chart:"size_chart"},Jt=(Ht={option_value_name:"",name:"商品名称不能为空",description:"",tags:"请选择标签",meta_title:"",meta_keyword:"",meta_description:"",template_suffix:"",model:"spu不能为空",sku:"sku不能为空",vendor:"",color:"",upc:"",material:"材质不能为空",ean:"",size:"",jan:"",isbn:"",published_scope:"",stock_policy:"",quantity:"",stock_status:"",source:"",weight:"重量不能为空",minimum:"",review_rating:"",url:"",click:"",show_price:"实际售价格不能为空",price:"商品价格不能为空",sort_order:"",is_featured:"",is_hot:"0",is_out:"0",is_launch:"0",is_publish:"1",is_special:"0",is_new:"0",is_big:"0"},f()(Ht,"is_new","0"),f()(Ht,"status",""),f()(Ht,"category_ids","请选择商品分类"),f()(Ht,"related_id",""),f()(Ht,"product_option",""),f()(Ht,"images",""),f()(Ht,"related_product",""),f()(Ht,"wholesale_settings",""),f()(Ht,"size_chart",""),Ht),Qt={id:"attr_id_",option_id:"attr_option_id_",option_value_id:"attr_option_value_id_",color:"attr_color_",option_value_name:"attr_option_value_name_",name:"attr_name_",zsku:"attr_zsku_",price:"attr_price_",show_price:"attr_show_price_",weight:"attr_weight_",quantity:"attr_quantity_",sort_order:"attr_sort_order_",status:"attr_status_"},$t={id:"id",option_id:"option_id",color:"color",name:"name",zsku:"zsku",price:"price",show_price:"show_price",weight:"weight",quantity:"quantity",sort_order:"sort_order",status:"status",option_value_id:"option_value_id"},Zt={id:"whole_id_",product_id:"whole_product_id_",customer_group_id:"whole_customer_group_id_",purchase_number_min:"whole_purchase_number_min_",purchase_number_max:"whole_purchase_number_max_",date_start:"whole_date_start_",date_end:"whole_date_end_",selling_price:"whole_selling_price_"};function Xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var ea=o.a.Item,ta=function(e){b()(a,e);var t=Xt(a);function a(e,n){var r,i;g()(this,a),(i=t.call(this,e,n)).changeswitch=function(e,t){1==t.status?t.status=2:t.status=1},i.deleAttribute=function(e,t){i.context.dommodityAttribute.splice(t,1),i.commforceUpdate(Ze()(i))},i.setAttribute=function(){var e=i.context,t=e.isSku;return e.isCategoryIds?t?(t&&i.context.isSkufn(!0),void i.context.toggleWin("issetAttributes",{})):(u.a.warning(Jt.sku),i.context.isSkufn(!1),!1):(u.a.warning(Jt.category_ids),i.context.getCcategoryOptionValuefn(!1),!1)},i.state={};var o=i.props.form.getFieldDecorator;return i.columns=[(r={title:"颜色",dataIndex:"color",width:120},f()(r,"width",200),f()(r,"key",1),f()(r,"render",(function(e,t,a){return D.a.createElement("div",null,t.color,D.a.createElement(ea,{style:{display:"none"}},o(Qt.color+a,{initialValue:t.color||""})(D.a.createElement(q.a,{type:"hidden",value:t.color}))),D.a.createElement(ea,{style:{display:"none"}},o(Qt.option_value_id+a,{initialValue:t.option_value_id||""})(D.a.createElement(q.a,{type:"hidden",value:t.option_value_id}))),D.a.createElement(ea,{style:{display:"none"}},o(Qt.id+a,{initialValue:t.id||""})(D.a.createElement(q.a,{type:"hidden",value:t.id?t.id:""}))),D.a.createElement(ea,{style:{display:"none"}},o(Qt.option_id+a,{initialValue:t.option_id||""})(D.a.createElement(q.a,{type:"hidden",value:t.option_id}))))})),r),{title:"尺码",ColSpan:9,dataIndex:"name",width:200,key:2,render:function(e,t,a){return D.a.createElement("div",null,t.option_value_name,D.a.createElement(ea,{style:{display:"none"}},o(Qt.option_value_name+a,{initialValue:t.option_value_name||""})(D.a.createElement(q.a,{type:"hidden",value:t.option_value_name}))))}},{title:"子SKU",ColSpan:9,dataIndex:"zsku",width:200,key:3,render:function(e,t,a){return D.a.createElement(ea,null,o(Qt.zsku+a,{initialValue:t.zsku||"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))}},{title:"实际售价【 ＄ 】",ColSpan:9,dataIndex:"price",width:200,key:4,render:function(e,t,a){return D.a.createElement(ea,null,o(Qt.price+a,{initialValue:t.price||"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))}},{title:"市场价【 ＄ 】",ColSpan:9,dataIndex:"show_price",width:200,key:5,render:function(e,t,a){return D.a.createElement(ea,null,o(Qt.show_price+a,{initialValue:t.show_price||"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))}},{title:"重量【 KG 】",ColSpan:9,dataIndex:"weight",width:200,key:6,render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return D.a.createElement(ea,null,o(Qt.weight+a,{initialValue:t.weight||"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))}},{title:"库存",ColSpan:9,dataIndex:"quantity",width:200,key:7,render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return D.a.createElement(ea,null,o(Qt.quantity+a,{initialValue:t.quantity||"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,null)))}},{title:"排序",ColSpan:9,dataIndex:"sort_order",width:200,key:8,render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;return D.a.createElement(ea,null,o(Qt.sort_order+a,{initialValue:t.sort_order||""})(D.a.createElement(q.a,null)))}},{title:"操作",dataIndex:"operation",ColSpan:0,width:200,key:11,render:function(e,t,a){return D.a.createElement("div",{className:"operatingButton"},D.a.createElement(ea,{style:{margin:"0"}},o(Qt.status+a,{initialValue:1==t.status})(D.a.createElement(qt.a,{style:{width:"68px",fontSize:"12px"},checkedChildren:"上架",unCheckedChildren:"下架",onChange:function(e){return i.changeswitch(e,t)},defaultChecked:1==t.status}))),D.a.createElement(Mt.a,{title:"确定是否删除",okText:"确认",cancelText:"取消",onConfirm:function(){return i.deleAttribute(t,a)}},D.a.createElement(l.a,{type:"danger"},"删除")))}}],i}return v()(a,[{key:"commforceUpdate",value:function(e){e.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.context.setAttrdata,a=[];this.context.dommodityAttribute&&(a=JSON.parse(JSON.stringify(this.context.dommodityAttribute)));var n="";t.map((function(e){"Color"==e.name&&(n=e.option_value_list[0]?e.option_value_list[0].option_value_name:"")})),a.map((function(e){e.color=n}));var r={tableType:"expand",columns:this.columns,dataSource:a,noAdd:!0,ref:function(t){return e.tableEditor=t}};return D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription"},D.a.createElement("div",{className:"action-bar"},D.a.createElement(A.a,{type:"flex",justify:"start",align:"middle",gutter:10},D.a.createElement(R.a,null,D.a.createElement(l.a,{type:"primary",onClick:this.setAttribute},"设置属性")),D.a.createElement(R.a,null,D.a.createElement(l.a,{type:"primary",onClick:function(){return e.context.toggleWin("visibleAddress",{})}},"同步子SKU"))),D.a.createElement("div",{style:{marginTop:"10px"}},t&&t.map((function(e,t){return e.option_value_list?D.a.createElement("div",{key:t,className:"clearfix setatr-select-header",style:{display:0==e.option_value_list.length?"none":"block"}},D.a.createElement("div",{className:"setatr-select-type-name"},e.name),D.a.createElement("div",{className:"setatr-select-type"},D.a.createElement("ul",{className:"clearfix"},e.option_value_list.map((function(e,t){return D.a.createElement("li",{key:t,style:{border:"none",cursor:"default"}},e.option_value_name)}))))):""}))),D.a.createElement(A.a,{style:{marginTop:"10px"}},D.a.createElement(he.a,M()({ref:"butetable"},r))))),this.context.visibleAddress&&D.a.createElement(Wt,{commforceUpdate:this.commforceUpdate,this:this}))}}]),a}(x.Component);ta.contextType=P.a;var aa=ta,na=(a(734),a(377)),ra=a.n(na),ia=a(74),oa=a.n(ia),sa=a(376),la=a.n(sa),ca=(a(284),a(0)),ua=a.n(ca);a(1528);function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}Q.a.confirm;var da=function(e){b()(a,e);var t=pa(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={curNum:"isEmpty"},r}return v()(a,[{key:"componentDidMount",value:function(){}},{key:"changeShow",value:function(e){var t=this.props,a=t.imgList,n=t.curIndex,r=this.state.curNum,i="isEmpty"==r?n:r;if("prev"==e){if(0==i)return;i--}else{if(i==a.length-1)return;i++}this.setState({curNum:i})}},{key:"closePop",value:function(){this.props.closePop()}},{key:"resizeImg",value:function(e,t,a){var n=e.width,r=e.height;n<t&&r<a||(n/r>t/a?e.width=t:e.height=a)}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.imgList,n=e.curIndex,r=e.domain,i=e.isShow,o=e.curImgType,s=this.state.curNum,l=null!=o?[]:a;null!=o&&(l=a[o].map((function(e){return e.imageUrl||(e.imageUrl=e.image_url),e})));var c="isEmpty"==s?n:s,u=(document.documentElement.clientHeight,document.documentElement.clientWidth),p=(document.body.clientHeight,u-640);return D.a.createElement(Q.a,{visible:t,width:p,footer:null,onCancel:this.closePop.bind(this)},D.a.createElement("div",{className:"img-show-mol"},l.length>1?D.a.createElement(Y.a,{type:"left",className:c>0?"t-btn l-btn":"t-btn l-btn t-btn-disable",onClick:this.changeShow.bind(this,"prev")}):"",l.length>1?D.a.createElement(Y.a,{type:"right",className:c<l.length-1?"t-btn r-btn":"t-btn r-btn t-btn-disable",onClick:this.changeShow.bind(this,"next")}):"",1==i?D.a.createElement("img",{alt:"产品图片",className:"img-w",style:{width:"100%",maxWidth:720},src:r?r+l[c].imageUrl:l[c].imageUrl}):D.a.createElement("img",{alt:"产品图片",className:"img-w",style:{width:"100%",maxWidth:720},src:r?r+l[c]:l[c]})))}}]),a}(D.a.Component);da.defaultProps={imgList:[],curIndex:0};var ma=a(1572),fa=a.n(ma),ha=a(370),ga=function(e){return{type:ha.a,imagsAll:e}},ya=function(e){return{type:ha.b,imagsAll:e}};function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var _a=function(e){b()(a,e);var t=va(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).dragStart=function(e,t){var a=e.target;e.dataTransfer.setData("Text",t,a.tagName),a.tagName.toLowerCase()},r.dragDrop=function(e,t){e.preventDefault();var a=r.props.shopinfo.imagsAll.concat([]),n=e.dataTransfer.getData("Text"),i=a.splice(n,1);a.splice(t,0,i[0]),a.forEach((function(e,t){e.base_img&&(delete e.id,delete e.product_id),e.store_id=t})),r.props.shopdeleImgAsync(a)},r.deWeight=function(e){for(var t=0;t<e.length-1;t++)for(var a=t+1;a<e.length;a++)e[t].image==e[a].image&&(e.splice(a,1),a--);return e},r.imagesFncall=function(){var e=r.state,t=(e.imgUpload,e.imgsAll),a=r.props.shopinfo.imagsAll,n=[].concat(d()(a),d()(t));r.props.shopdeleImgAsync(n)},r.imgDel=function(e,t){r.context.imagesArr;var a=r.state,n=a.imgUpload,i=a.imgsAll,o=([].concat(d()(n),d()(i)),r.props.shopinfo.imagsAll);o.splice(e,1),r.props.shopdeleImgAsync(o)},r.fileImgeFn=function(){var e=la()(oa.a.mark((function e(t){var a,n,i,o,s,l,c,u,p;return oa.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setLoading(!0),a=new FormData,n=r.context,i=n._category_id,o=n._sku,s=t.file,a.append("file",t.file,t.file.name),a.append("token",localStorage.getItem("USER_TOKEN")),a.append("access_token",localStorage.getItem("ACCESS_TOKEN")),a.append("sku",o),a.append("category_id",i),{token:localStorage.getItem("USER_TOKEN"),access_token:localStorage.getItem("ACCESS_TOKEN"),sku:o,category_id:i},e.next=12,fetch("https://api.ohhmail.com/api/admin/product_image_upload",{method:"POST",redirect:"follow",body:a});case 12:return l=e.sent,e.next=15,l.json();case 15:200==(c=e.sent).resultId&&(ue({type:"success",content:"上传成功"}),u=Ze()(r),(p=new FileReader).onload=function(e){u.setState({imgsAll:[].concat(d()(u.state.imgsAll),[{image:c.resultData,base_img:e.target.result}])}),u.imagesFncall()},p.readAsDataURL(s));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.fileProps={name:"file",showUploadList:!1,accept:".jpg,.jpeg,.png",multiple:!0,customRequest:function(e){r.setState({imgsAll:[]}),r.fileImgeFn(e)}},r.setLoading=function(e){r.setState({uploadLocalLoading:e})},r.isCategoryId=function(){var e=r.context,t=e.isSku;return e.isCategoryIds?t?void(t&&r.context.isSkufn(!0)):(u.a.warning(Jt.sku),r.context.isSkufn(!1),!1):(u.a.warning(Jt.category_ids),r.context.getCcategoryOptionValuefn(!1),!1)},r.imgShow=function(e,t,a){e.preventDefault(),r.setState({showImgMol:!0,imgCurIndex:a})},r.state={uploadLocalLoading:!1,imgsAll:e.shopinfo.imagsAll||[],imgUpload:[],showImgMol:!1,imgCurIndex:0,imgArr:[]},r}return v()(a,[{key:"componentDidMount",value:function(){this.setState({imgsAll:this.props.shopinfo.imagesArr||[]})}},{key:"closeImgModal",value:function(){this.setState({showImgMol:!1})}},{key:"render",value:function(){var e=this,t=this.context,a=t.isSku,n=t.isCategoryIds,r=(t.imagesArr,this.state),i=r.imgsAll,o=(r.showImgMol,r.imgCurIndex,i.map((function(e){return e.img_m||e.image?e.img_m||e.image:e})),this.props.shopinfo.imagsAll),s=void 0===o?[]:o;return D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription",title:D.a.createElement("span",null,D.a.createElement(Y.a,{type:"file-text",theme:"filled"})," 商品图片")},D.a.createElement("div",{className:"action-bar"},D.a.createElement("div",{className:"shops-imgs-cont clearfix"},D.a.createElement("div",{className:"shops-imgsall"},D.a.createElement("div",{className:"ul"},s.map((function(t,a){return D.a.createElement("div",{className:"t-imgcenter li",key:a,draggable:"true",onDragOver:function(e){return e.preventDefault()},onDragStart:function(t){return e.dragStart(t,a)},onDrop:function(n){return e.dragDrop(n,a,t)},"data-id":t.id||a},D.a.createElement(Y.a,{className:"iconfont shop_ziyuan17 icon-del",type:"close-circle",onClick:function(){return e.imgDel(a,t)}}),0===a?D.a.createElement("div",{class:"tag-main"},D.a.createElement("span",null,"主图")):"",1===a?D.a.createElement("div",{class:"tag-main"},D.a.createElement("span",null,"翻转")):"",D.a.createElement("img",{src:t.base_img||t.img_m||t.image,onClick:function(n){return e.imgShow(n,t,a)}}),D.a.createElement("div",{class:"img-drop-item",style:{background:"url(".concat(fa.a,")  50% no-repeat #108ee9")}}))})))),D.a.createElement("div",{className:"shops-imgs-cont-btns"},D.a.createElement("div",{style:{display:a&&n?"block":"none"}},D.a.createElement(ra.a,M()({className:"upload-shopimgall"},this.fileProps),D.a.createElement("a",{href:"javascript:void(0)",className:"shops-imgs-a"},"本地图片"))),D.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.isCategoryId()},className:"shops-imgs-a",style:{display:a&&n?"none":"block"}},"本地图片"),D.a.createElement("div",{className:"shops-imgs-msg"},D.a.createElement("i",{className:"iconfont shop_ziyuan23 remove"}),D.a.createElement("span",{className:"remove shops-imgs-text"},"注:第一张图片为主图，支持拖动排序。像素至少为800*800的图片。配有多张高质量图片的产品往往销售情况最好")))))))}}]),a}(x.Component);_a.propTypes={shopAddImgAsync:ua.a.func,shopdeleImgAsync:ua.a.func},_a.contextType=P.a;var ba=Object(Se.connect)((function(e){return e.Shops}),{shopdeleImgAsync:ya,shopAddImgAsync:ga})(_a);function Ea(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Sa=q.a.TextArea,wa=o.a.Item,ka=(W.a.Option,W.a.OptGroup,function(e){b()(a,e);var t=Ea(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).state={checkAll:!1},r}return v()(a,[{key:"render",value:function(){var e=this.props.form,t=this.context,a=t.formFieldsName,n=(t.formFields,t._parms),i=e.getFieldDecorator;return D.a.createElement(D.a.Fragment,null,D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription",title:D.a.createElement("span",null,D.a.createElement(Y.a,{type:"file-text",theme:"filled"})," SEO设置")},D.a.createElement(r.a,{loading:!1,paragraph:{rows:10}},D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(wa,M()({},B.b,{label:"自定义链接:"}),i(a.url,{initialValue:me(n,"url")})(D.a.createElement(q.a,{width:"700px",placeholder:"支持字母（英文小写），下划线（_），数字。且必须以字母开头"}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(wa,M()({},B.b,{label:"SEO标题:"}),i(a.meta_title,{initialValue:me(n,"meta_title")})(D.a.createElement(q.a,{width:"700px"}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(wa,M()({},B.b,{label:"SEO关键字:"}),i(a.meta_keyword,{initialValue:me(n,"meta_keyword")})(D.a.createElement(q.a,{width:"700px"}))))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:16},D.a.createElement(wa,M()({},B.b,{label:"SEO描述:"}),i(a.meta_description,{initialValue:me(n,"meta_description")})(D.a.createElement(Sa,{rows:4})))))))))}}]),a}(x.Component));ka.contextType=P.a;a(1514);function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Oa=o.a.Item,xa=W.a.Option,Da=function(e){b()(a,e);var t=Ca(a);function a(e,n){var r,i;g()(this,a),(i=t.call(this,e,n)).deleteShops=function(e,t){i.context.wholesaleDel(e,t)},i.addShops=function(){var e=i.context,t=e.isSku,a=e.isCategoryIds,n=e.getCustomersGroupPager;if(!a)return u.a.warning(Jt.category_ids),i.context.getCcategoryOptionValuefn(!1),!1;if(!t)return u.a.warning(Jt.sku),i.context.isSkufn(!1),!1;t&&i.context.isSkufn(!0);var r={get_customers_group_list:n,purchase_number_min:"",purchase_number_max:"",date_start:"",date_end:""};i.context.wholesaledatacall(r)},i.state={getCustomersGroupPager:[],wholesaledatalist:[]};var o=i.props.form.getFieldDecorator;return i.columns=[(r={title:"会员等级",dataIndex:"customer_group_id",width:120},f()(r,"width",200),f()(r,"key",1),f()(r,"render",(function(e,t,a){return D.a.createElement("div",null,D.a.createElement(Oa,null,o(Zt.customer_group_id+a,{initialValue:me(t,"customer_group_id"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(W.a,{style:{width:200}},t.get_customers_group_list&&t.get_customers_group_list.map((function(e){return D.a.createElement(xa,{value:e.id,key:e.id},e.name)}))))),t.id&&D.a.createElement(Oa,{style:{display:"none"}},o(Zt.id+a,{initialValue:me(t,"id")})(D.a.createElement(q.a,null))),t.product_id&&D.a.createElement(Oa,{style:{display:"none"}},o(Zt.product_id+a,{initialValue:me(t,"product_id")})(D.a.createElement(q.a,null))))})),r),{title:"购买数量",ColSpan:9,dataIndex:"purchase_number_min",width:200,key:2,render:function(e,t,a){return D.a.createElement("div",{style:{display:"flex"}},D.a.createElement(Oa,null,o(Zt.purchase_number_min+a,{initialValue:me(t,"purchase_number_min"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,{prefix:">",style:{width:"100px"}}))),D.a.createElement("span",{style:{color:"#DCDCDC",margin:"0 10px"}},"——"),D.a.createElement(Oa,null,o(Zt.purchase_number_max+a,{initialValue:me(t,"purchase_number_max"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,{prefix:"≤",style:{width:"100px"}}))))}},{title:"市场价【 ＄ 】",ColSpan:9,dataIndex:"selling_price",width:200,key:3,render:function(e,t,a){return D.a.createElement(Oa,null,o(Zt.selling_price+a,{initialValue:me(t,"selling_price"),rules:[{required:!0,message:"必填项"}]})(D.a.createElement(q.a,{prefix:"≤",style:{width:"100px"}})))}},{title:"开始时间",ColSpan:9,dataIndex:"date_start",width:200,key:4,render:function(e,t,a){return D.a.createElement(Oa,null,o(Zt.date_start+a,{initialValue:t.date_start?Ie()(t.date_start,"YYYY/MM/DD"):"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(Re.a,null)))}},{title:"结束时间",ColSpan:9,dataIndex:"date_end",width:200,key:5,render:function(e,t,a){return D.a.createElement(Oa,null,o(Zt.date_end+a,{initialValue:t.date_end?Ie()(t.date_end,"YYYY/MM/DD"):"",rules:[{required:!0,message:"必填项"}]})(D.a.createElement(Re.a,{placeholder:""})))}},{title:"操作",dataIndex:"operation",ColSpan:0,width:200,key:11,render:function(e,t,a){return D.a.createElement("div",{className:"operatingButton"},D.a.createElement(Mt.a,{title:"确定是否删除",okText:"确认",cancelText:"取消",onConfirm:function(){return i.deleteShops(t,a)}},D.a.createElement(l.a,{type:"danger"},"删除")))}}],i}return v()(a,[{key:"render",value:function(){var e=this.context.getCustomersGroupPager;this.columns2=[{title:"会员等级",dataIndex:"customer_group_id",width:"10%",_type:{name:"select",data:e},_itemConf:{rules:[{required:!0,message:"必填项"}]}},{title:"购买数量",width:"30%",dataIndex:"purchase_number",_type:{name:"group"},_itemConf:{rules:[{required:!0,message:"必填项"}]}},{title:"市场价【 ＄ 】",width:"20%",dataIndex:"selling_price",_itemConf:{rules:[{required:!0,message:"必填项"}]}},{title:"开始时间",width:"15%",_type:"date",dataIndex:"date_start",_itemConf:{rules:[{required:!0,message:"必填项"}]}},{title:"结束时间",width:"15%",_type:"date",dataIndex:"date_end",_itemConf:{rules:[{required:!0,message:"必填项"}]}}];var t=this.context.wholesaledata,a=(this.state.wholesaledatalist,{tableType:"expand",columns:this.columns,dataSource:t});this.props.form,this.columns2,this.state.force,this.state.dataSource;return D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription"},D.a.createElement("div",{className:"action-bar"},D.a.createElement(A.a,{type:"flex",justify:"start",align:"middle",gutter:10},D.a.createElement(R.a,null,D.a.createElement(l.a,{type:"primary",onClick:this.addShops},"新增"))),D.a.createElement(A.a,{style:{marginTop:"10px"}},D.a.createElement(he.a,a)))))}}]),a}(x.Component);Da.contextType=P.a;var Pa=Da;function ja(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Ta=function(e){b()(a,e);var t=ja(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).addShops=function(){r.context.toggleWin("visibleAddShops",{})},r.deleteShops=function(e,t){var a=r.context.crossSellProducts;a=a.splice(t,1),r.setState({type:!r.state.type})},r.state={type:!0},r.columns=[{title:"商品图片",dataIndex:"img_m",width:120,key:1,render:function(e,t,a){return D.a.createElement(D.a.Fragment,null,D.a.createElement("img",{src:e||""!=e?e:img_m,alt:"",style:{width:50}}))}},{title:"商品名称",ColSpan:9,dataIndex:"name",width:300,key:33,render:function(e,t,a){return D.a.createElement("div",{className:"storage-table-style"},D.a.createElement("p",null,t.name?t.name:""))}},{title:"子SKU",ColSpan:9,dataIndex:"sku",width:300,key:4,render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return D.a.createElement("div",null,"SKU: ",t.sku)}},{title:"操作",dataIndex:"operation",ColSpan:0,width:200,key:11,render:function(e,t,a){return D.a.createElement("div",{className:"operatingButton"},D.a.createElement(Mt.a,{title:"确定是否删除",okText:"确认",cancelText:"取消",onConfirm:function(){return r.deleteShops(t,a)}},D.a.createElement(l.a,{type:"danger"},"删除")))}}],r}return v()(a,[{key:"render",value:function(){var e=this.context.crossSellProducts,t={columns:this.columns,dataSource:e,rowSelection:{onChange:function(e,t){},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}}};return D.a.createElement("div",{className:"content-main-card"},D.a.createElement(I.a,{className:"dercription"},D.a.createElement("div",{className:"action-bar"},D.a.createElement(A.a,{type:"flex",justify:"start",align:"middle",gutter:10},D.a.createElement(R.a,null,D.a.createElement(l.a,{type:"primary",onClick:this.addShops},"添加商品"))),D.a.createElement(A.a,{style:{marginTop:"10px"}},D.a.createElement(he.a,t)))))}}]),a}(x.Component);Ta.contextType=P.a;var Ia,za,Aa,Na=Ta,Ra=(a(1499),a(1500)),Va=a.n(Ra),Ma=(a(1489),a(1501));function Fa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Ua=(za=Ia=Object(ft.a)({toolConfig:{list:{action:"get_products_pager"}}})(Aa=function(e){b()(a,e);var t=qa(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).beforeCallback=function(e){r.props.setSelectRowsadd(r.props.selectedRows),r.props.toggleWin("visibleAddShops")},r.onCancel=function(){r.props.toggleWin("visibleAddShops")},r.handleClick=function(e,t){r.props.changeSearch(e)},r.clearCategory=function(){r.setState({categoryId:""},(function(){r.props.changeSearch({categoryId:""},r.state.activeKey)}))},r.state={categroyList:[],stage:!0,stageid:"",supdata:[]},r.columns=[{title:"缩略图",dataIndex:"img_m",width:80,render:function(e,t,a){return D.a.createElement("a",{href:t.image},D.a.createElement("img",{src:e,style:{width:"60px"}}))}},{title:"商品信息",dataIndex:"sku",width:150,render:function(e,t,a){return D.a.createElement("div",null,D.a.createElement("p",null,"SPU:",t.spu),D.a.createElement("p",null,"SKU:",t.sku),D.a.createElement("p",null,"COLOR:",t.color),D.a.createElement("p",null,"SIZE:",t.size))}},{title:"商品名称",dataIndex:"name",width:200},{title:"商品分类",dataIndex:"categories",width:200,render:function(e,t){return D.a.createElement("span",null,e.parent_category_name," ",e.parent_category_name?D.a.createElement("span",null," > "):""," ",e.child_category_name)}},{title:"商品实际售价格(USD)",dataIndex:"show_price",width:100,render:function(e,t){var a;return a=parseFloat(e).toFixed(2),D.a.createElement("span",null,a)}},{title:"商品市场价格(USD)",dataIndex:"price",width:100,render:function(e,t,a){var n;return n=parseFloat(e).toFixed(2),D.a.createElement("span",null,n)}}],r}return v()(a,[{key:"componentDidMount",value:function(){var e=this;Object(ze.b)(tt.a.get_category_tree_list).then((function(t){200==t.resultId&&(t.resultData.forEach((function(e){e.children=e.children,e.cate_name=e.name,e.review_status_num=e.parent_id,e.children&&e.children.forEach((function(e){e.children=e.children?e.children:[],e.cate_name=e.name,e.review_status_num=e.parent_id,e.children&&e.children.forEach((function(e){e.children=e.children?e.children:[],e.cate_name=e.name,e.review_status_num=e.parent_id}))}))})),e.setState({categroyList:t.resultData}))}))}},{key:"render",value:function(){var e=this,t=this.state.categroyList,a=(this.props.dataS,{beforeCallback:this.beforeCallback,title:!1,method:tt.a.add_customer,visible:this.props.visibleAddShops,onCancel:this.onCancel,form:this.props.form,winType:3}),n={handleClick:this.handleClick,categroyList:t,clearCategory:this.clearCategory,type:"dev",ref:function(t){return e.child=t}},r=this.props.tableConfig;r.dataSource&&r.dataSource.map((function(e){e.selechange=0}));var i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({columns:this.columns},r);return D.a.createElement(je.ModalComp,a,D.a.createElement(A.a,{style:{padding:"20px"}},D.a.createElement(R.a,{span:6,style:{marginRight:"10px"}},D.a.createElement(Va.a,{offsetTop:94},D.a.createElement(Ma.a,n))),D.a.createElement(R.a,{span:17},D.a.createElement("div",{className:"content-table"},D.a.createElement(Pe.a,M()({},i,{selectedRowKeys:this.state.listSelData}))))))}}]),a}(x.Component))||Aa,Ia.contextType=P.a,za);function Ya(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ka(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ya(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Ha=o.a.Item,Wa=q.a.Group,Ba=W.a.Option,Ga=function(e){b()(a,e);var t=La(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).beforeCallback=function(){for(var e=r.state,t=e.setAttrdata,a=e.color,n=r.context.issetAttributescall,i=0;i<t.length;i++)if(0==t[i].option_value_list.length)return ue({content:"请选择属性"}),!1;n(t,a),r.context.toggleWin("issetAttributes",{})},r.onCancel=function(){r.context.toggleWin("issetAttributes",{})},r.changeSelect=function(e){var t=r.state.getCategoryOptionvalue,a=[];t.forEach((function(t){t.id==e&&(t.option_value_list.forEach((function(e){e.option_value_name=e.name,e.option_name=t.name})),a=t.option_value_list)})),r.setState({tabsearch:"",attributevalue:a})},r.listChange=function(e,t,a){for(var n=r.state,i=n.attributevalue,o=(n.parms,n.setAttrdata),s=(n._className,n.is_ids),l=0;l<s.length;l++){if(e.option_value_name==s[l].option_value_name){"Color"==e.option_name&&(e.color_id=s[l].color_id),e.id=s[l].id;break}e.id=""}i.splice(t,1),o.forEach((function(t){if(t.name==a)if("Color"!=a){var n=!0;t.option_value_list.forEach((function(t){e.option_value_name==t.option_value_name&&(n=!1)})),n&&t.option_value_list.push(e)}else{var r=[e];t.option_value_list=r}})),r.setState({setAttrdata:o})},r.issearch=function(e){for(var t=r.state.attributevalue,a=e.target.value,n=[],i=t,o=i.length,s=0;s<o;s++){-1!=i[s].option_value_name.indexOf(a)&&n.push(i[s])}r.setState({tabsearch:n})},r.deWeight=function(e){for(var t=0;t<e.length-1;t++)for(var a=t+1;a<e.length;a++)e[t].id==e[a].id&&(e.splice(a,1),a--);return e},r.state={attributevalue:[],sizeAttributevalue:[],colorAttributevalue:[],type_select:"",list:[],parms:{},setAttrdata:[],type_name:"",color:"",_className:"",getCategoryOptionvalue:[],is_ids:[]},r}return v()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.context.setAttrdata;0==this.context.setAttrdata.length&&(t=[{name:"Size",option_id:"1",option_value_list:[]},{name:"Color",option_id:"1",option_value_list:[]}]),t=JSON.parse(JSON.stringify(t)),this.setState({setAttrdata:t||[]});var a=[];t.map((function(e){e.option_value_list&&e.option_value_list.map((function(e){var t={id:e.id,option_value_name:e.option_value_name};a.push(t)}))})),this.setState({is_ids:a}),Object(ze.b)(tt.a.get_param_option_list,{}).then((function(t){200==t.resultId&&(e.setState({getCategoryOptionvalue:t.resultData}),e.changeSelect(1))}))}},{key:"changeDel",value:function(e,t,a,n){var r=this.state,i=r.attributevalue,o=r.setAttrdata;o.forEach((function(e){e.name==a&&e.option_value_list.splice(t,1)})),this.setState({setAttrdata:o,attributevalue:this.deWeight([].concat(d()(i),[Ka({},e)])),type_name:n})}},{key:"render",value:function(){var e,t=this,a=this.props.form,n=(e={title:!1,winType:2,beforeCallback:this.beforeCallback,onCancel:this.onCancel,visible:this.context.issetAttributes},f()(e,"onCancel",this.onCancel),f()(e,"form",this.props.form),e),r=a.getFieldDecorator,i=this.state,o=i.attributevalue,s=(i.type_name,i.type_select,i.setAttrdata),l=i.getCategoryOptionvalue,c=i.tabsearch;return D.a.createElement(je.ModalComp,n,D.a.createElement("div",{style:{padding:"20px"}},D.a.createElement(D.a.Fragment,null,s&&s.map((function(e,a){return e.option_value_list?D.a.createElement("div",{className:"clearfix setatr-select-header",style:{display:0==e.option_value_list.length?"none":"block"}},D.a.createElement("div",{class:"setatr-select-type-name"},e.name),D.a.createElement("div",{className:"setatr-select-type"},D.a.createElement("ul",{className:"clearfix"},e.option_value_list.map((function(a,n){return D.a.createElement("li",{key:a.id},a.option_value_name,D.a.createElement(Y.a,{type:"close-circle",onClick:function(){return t.changeDel(a,n,a.option_name,e.option_value_name)}}))}))))):""}))),D.a.createElement(A.a,null,D.a.createElement(R.a,{span:20},D.a.createElement(Ha,B.a,r("set_attr",{initialValue:""})(D.a.createElement(Wa,{compact:!0,placeholder:"选择属性"},D.a.createElement(W.a,{defaultValue:"Size",style:{width:"100px"},onChange:this.changeSelect},l&&l.map((function(e){return"Size"==e.name||"Color"==e.name?D.a.createElement(Ba,{value:e.id,key:e.index},e.name):""}))),D.a.createElement(q.a,{style:{width:"200px"},onBlur:function(e){return t.issearch(e)},placeholder:"输入属性值名称搜索"})))))),D.a.createElement(A.a,null,D.a.createElement("div",{className:"setattr"},D.a.createElement("ul",{className:"clearfix clearul"},(c||o&&o).map((function(e,a){return D.a.createElement("li",{key:e.id,onClick:function(){return t.listChange(e,a,e.option_name)}},e.option_value_name)})))))))}}]),a}(x.Component);Ga.contextType=P.a;var Ja=o.a.create()(Ga);function Qa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(a),!0).forEach((function(t){f()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=k()(e);if(t){var r=k()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return S()(this,a)}}var Xa=O.a.TabPane,en=function(e){b()(a,e);var t=Za(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).getProductInfo=function(){if(r.props.shopdeleImgAsync([]),r.props.params){var e=r.props.params.id;0!=e?(r.setState({id:parseInt(e),editId:parseInt(e),shoptype:!0}),Object(ze.b)(tt.a.get_product,{product_id:e}).then((function(e){if(e){var t=e.resultData,a=e.resultData;if(t.categories&&r.setState({isSku:!0,isCategoryIds:!0,_category_id:t.categories.child_category_id,_sku:t.sku,newRelatesPro:a}),t.product_option_values){var n={name:"Size",option_id:"1",option_value_list:[]},i={name:"Color",option_id:"1",option_value_list:[]},o=[];t.product_option_values.Size&&(n={name:"Size",option_value_list:t.product_option_values.Size}),t.product_option_values.Color&&(i={name:"Color",option_value_list:t.product_option_values.Color}),o.push(n,i),r.setState({setAttrdata:o})}var s=t.product_option_values&&t.product_option_values?t.product_option_values.Size:[];if(r.props.shopAddImgAsync(t.images),r.setState({_parms:t,imagesArr:t.images,dommodityAttribute:s,sizeChart:t.size_chart||[],sizeChartTable:t.size_chart||[],crossSellProducts:t.relates||[],size_stage:!!t.id}),t.wholesale_settings){var l=[];r.state.getCustomersGroupPager&&(t.wholesale_settings.forEach((function(e){e.get_customers_group_list=r.state.getCustomersGroupPager,l.push(e)})),r.setState({wholesaledata:l}))}setTimeout((function(){r.setState({loading:!1})}),300)}}))):r.setState({loading:!1})}},r.changeTab=function(e){r.setState({activeKey:e})},r.onChange=function(){},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",a=arguments.length>1?arguments[1]:void 0;r.setState((e={},f()(e,t,!r.state[t]),f()(e,"otherConfig",a),e))},r.setSelectRows=function(e,t){var a;a=[].concat(d()(r.state.crossSellProducts),d()(e)),r.setState({crossSellProducts:function(e){return Array.from(new Set(e))}(a)})},r.getCcategoryOptionValuefn=function(e){r.setState({getCategorySearchData:[],_category_id:e});e?r.setState({isCategoryIds:!0}):r.setState({activeKey:"1"}),Object(ze.b)(tt.a.get_search_list).then((function(e){r.setState({getCategorySearchData:e.resultData})}))},r.sizeChartBind=function(e){r.setState({sizeChart:e,sizeChartTable:e})},r.wholesaleDelfn=function(e,t){var a=r.state.wholesaledata;a.splice(t,1),r.setState({wholesaledata:a})},r.wholesaleSetupDataProcessing=function(e){var t=r.state.wholesaledata;if(t.length){var a=de(t.length,Zt,e),n=pe(t.length,a,Zt);if(0!=n.length){var i=[];return n.forEach((function(e){e.date_start=Ie()(e.date_start).format("YYYY-MM-DD"),e.date_end=Ie()(e.date_end).format("YYYY-MM-DD"),i.push(e)})),i}}},r.formFieldsDispose=function(e){var t=r.state.id;for(var a in Bt.id=t||"",Bt.id||delete Bt.id,e)Bt[a]=e[a],e.tags&&(Bt.tag_ids=e.tags.toString(),delete Bt.tags);return Bt},r.decideEmpty=function(e,t){return""===t?(ue({type:"warning",content:"选择商品分类"}),r.setState({activeKey:"1"}),!1):""!==e||(ue({type:"warning",content:"SKU不能为空"}),r.setState({activeKey:"1"}),!1)},r.productIdDispose=function(e){var t={is_out:"is_out",is_hot:"is_hot",is_launch:"is_launch",is_publish:"is_publish",is_special:"is_special",is_new:"is_new",is_big:"is_big",minimum:"minimum"};for(var a in t)""==e[t[a]]||0==e[t[a]]?e[t[a]]=0:e[t[a]]=1;return e},r.handleSubmit=function(e){e.preventDefault();var t=r.state,a=t._sku,n=t._category_id,i=t.sizeChart,o=r.props.shopinfo.imagsAll;r.props.form.validateFields((function(e,t){if(e)return u.a.error("请填写必要数据"),!1;if(!i)return u.a.error("请填写尺码信息"),!1;if(!r.decideEmpty(a,n))return u.a.error("请填写sku和分类"),!1;var s=r.props.form.getFieldsValue(),l=r.attrIbutedataProcessing(s);if(l){t.product_option=l?JSON.stringify(l):[],o&&(t.images=o),r.state.crossSellProducts&&(t.related_id=r.state.crossSellProducts.map((function(e){return e.id})).join(",")),i&&(t.size_chart=JSON.stringify(i)),r.productIdDispose(t);var c=r.wholesaleSetupDataProcessing(s);t.wholesale_settings=c?JSON.stringify(c):[],t.description=UE.getEditor("wapcontainer1")?UE.getEditor("wapcontainer1").getContent():"";var p=r.formFieldsDispose(t),d=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={};for(var n in e)for(var r in t)e[n]==r&&(a[e[n]]||(a[e[n]]=t[r]))}(Gt,p),[]);t.images&&t.images.map((function(e){d.push({id:0,image:e.image})}));var m={name:t.name,sku:t.sku,model:t.model||t.spu,price:t.price,show_price:t.show_price,material:t.material,weight:t.weight,minimum:t.minimum,url:t.url,sort_order:t.sort_order,description:t.description,meta_title:t.meta_title,meta_keyword:t.meta_keyword,meta_description:t.meta_description,category_ids:t.category_ids,size_chart:t.size_chart,product_option:t.product_option,related_id:t.related_id,images:JSON.stringify(d),tag_ids:t.tag_ids.toString(),wholesale_settings:t.wholesale_settings};m.id=r.state._parms.id?r.state._parms.id:"",e||Object(ze.b)(tt.a.save_product_basic,$a({},m),!0).then((function(e){200==e.resultId?(r.props.goBack(),u.a.success(e.resultMsg)):u.a.warning(e.resultMsg)}))}}))},r.isValidateForm=function(e){var t=e.name,a=e.category_ids,n=e.sku;return""===e.spu?(u.a.warning(Jt.sku),r.setState({activeKey:"1"}),!1):""==n?(u.a.warning(Jt.model),r.setState({activeKey:"1"}),!1):""===t?(u.a.warning(Jt.name),r.setState({activeKey:"1"}),!1):""===a?(u.a.warning(Jt.category_ids),r.setState({activeKey:"1"}),!1):void 0},r.isSkufn=function(e){e?r.setState({isSku:!0}):r.setState({activeKey:"1",isSku:!1})},r.isSkuVal=function(e){r.setState({_sku:e})},r.wholesaledatacall=function(e){r.setState({wholesaledata:[].concat(d()(r.state.wholesaledata),[$a({},e)])})},r.issetAttributescall=function(e,t){var a,n=[],i={},o=[],s=!0;a=e[1].option_value_list[0].option_value_name;var l=e[1].option_value_list[0].option_value_name;s=a!=l,e.forEach((function(t,a){t.name,"Size"===t.name&&t.option_value_list&&t.option_value_list.forEach((function(t,a){var i=r.state._sku+"-"+t.option_value_name;if(s)t.option_value_id=t.id,n.push($a($a({},t),{},{quantity:"",price:"",show_price:"",weight:"",zsku:i,status:!0,sort_order:"",key:a}));else{var o="";o=r.state.setAttrdata[0]?r.state.setAttrdata[0].option_value_list:e[0].option_value_list;var l={};o.forEach((function(e,a){e.option_value_name!=t.option_value_name||(l=e)})),t.option_value_id=t.id,n.push($a($a({},t),{},{quantity:l.quantity||"",price:l.price||"",show_price:l.show_price||"",weight:l.weight||"",zsku:l.zsku||i,status:1==l.status,sort_order:l.sort_order||"",key:a}))}})),o.push(i)})),r.setState({dommodityAttribute:n,setAttrdata:e})},r.commodityimagesfn=function(e,t){var a=e.filter((function(e){return!e.base_img}));t&&a.splice(t,1),r.setState({imagesArr:a});var n=r.props.shopinfo.imagsAll;t?(r.props.shopdeleImgAsync(a),n.splice(t,1)):r.props.shopAddImgAsync(a),r.setState({imagesArr:a})},r.state={visibleAddress:!1,activeKey:e.activeKey||j[0].status,_parms:{},id:"",reviewStatus:"",issize:"",statusList:[],QcInfoDate:[],visibleQuality:!1,editId:"",activeCode:"",visible:!1,reviewStatusCode:"0",tortData:[],contendData:[],pretrial:!1,loading:!0,saveDisable:!1,visibleSkuSetting:!1,visibleAddShops:!1,setAttrdata:[],dommodityAttribute:[],issetAttributes:!1,wholesaledata:[],crossSellProducts:[],categroyList:[],addShopdataSource:[],formFields:Bt,formFieldsName:Gt,getTreeCategorySimple:[],getCategorySearchData:[],getCustomersGroupPager:[],imagesArr:[],isSku:!1,isCategoryIds:!1,_category_id:"",_sku:"",product_option_value:"",sizeChart:[],rowData:[],sizeChartTable:[],isEditPager:"",isEditPagerEdit:"",newRelatesPro:{},shoptype:!1},r.issize={},r}return v()(a,[{key:"componentDidMount",value:function(){var e=this;Object(ze.b)(tt.a.get_search_list).then((function(t){e.setState({getCategorySearchData:t.resultData})})),Object(ze.b)(tt.a.get_products_pager).then((function(t){t.resultData.forEach((function(e){e.key=e.id})),e.setState({addShopdataSource:d()(t.resultData)})})).catch((function(e){})),Object(ze.b)(tt.a.get_tree_category_simple).then((function(t){t.code,t.data;e.setState({getTreeCategorySimple:t.resultData})})),Object(ze.b)(tt.a.get_customers_group_pager).then((function(t){t.code,t.data;e.setState({getCustomersGroupPager:t.resultData})})),this.getProductInfo()}},{key:"attrIbutedataProcessing",value:function(e){var t=this.state,a=t.dommodityAttribute,n=t.setAttrdata;t.editId;if(a){var r=de(a.length,Qt,e),i=pe(a.length,r,Qt),o=function(e,t,a){for(var n=[],r=0;r<e.length;r++){var i={};for(var o in a)for(var s=0;s<t.length;s++)e[r][a[o]]&&(t[s][a[o]]=e[r][a[o]],i[a[o]]||(i[a[o]]=t[s][a[o]]));n.push(i)}return n}(a,JSON.parse(JSON.stringify(i)),$t);if(0==r.length)return ue({type:"warning",content:"选择属性"}),void this.setState({activeKey:"2"});if(0!=i.length){for(var s=JSON.parse(JSON.stringify(n)),l={},c=[],p=[],d=0;d<i.length;d++)""==i[d].id&&(i[d].id=0),i[d].name=o[d].name,i[d].status=0==r[d]["attr_status_"+d]?0:1,i[d].type_name&&delete i[d].type_name,i[d].option_name="Size",delete i[d].name,delete i[d].option_value_id,delete i[d].option_id,p.push(i[d]);var m="";return s.forEach((function(e){if(e.option_name=e.name,delete e.name,m||(m=p[0].color),delete e.option_id,e.class=1,e.type="select",e.required=1,"Size"===e.option_name)e.product_option_value=p,e.option_value_list&&delete e.option_value_list,delete e.type_name,l=$a({},e);else if("Color"===e.option_name){var t=p[0];if((t=JSON.parse(JSON.stringify(t))).option_name="Color",t.option_value_name=m,t.zsku="",n[1]){if(!n[1].option_value_list[0])return u.a.error("请选择属性颜色"),!1;t.id=n[1].option_value_list[0].id||0}e.product_option_value=[],e.product_option_value.push(t),e.option_value_list&&delete e.option_value_list,delete e.type_name,l=$a({},e)}p.map((function(e){delete e.color})),c.push(l)})),c}}else u.a.error("请设置商品属性")}},{key:"shopclose",value:function(e){this.props.goBack()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.loading,t.activeKey);var n=this.props,i=n.form,s=n.params,c={toggleWin:this.toggleWin,shoptype:this.state.shoptype,visibleAddress:this.state.visibleAddress,dommodityAttribute:this.state.dommodityAttribute,dommodityAttributefn:this.dommodityAttributefn,setAttrdata:this.state.setAttrdata,issetAttributes:this.state.issetAttributes,issetAttributescall:this.issetAttributescall,wholesaledata:this.state.wholesaledata,crossSellProducts:this.state.crossSellProducts,visibleAddShops:this.state.visibleAddShops,addShopsfn:this.visibleAddShops,_parms:this.state._parms,wholesaleDel:this.wholesaleDelfn,getCcategoryOptionValuefn:this.getCcategoryOptionValuefn,_category_id:this.state._category_id,_sku:this.state._sku,wholesaledatacall:this.wholesaledatacall,categroyList:this.state.categroyList,commodityimagescall:this.commodityimagesfn,formFields:this.state.formFields,formFieldsName:this.state.formFieldsName,getTreeCategorySimple:this.state.getTreeCategorySimple,getCategorySearchData:this.state.getCategorySearchData,getCustomersGroupPager:this.state.getCustomersGroupPager,isSku:this.state.isSku,isCategoryIds:this.state.isCategoryIds,isSkufn:this.isSkufn,isSkuVal:this.isSkuVal,imagesArr:this.state.imagesArr},u=this.sizeChartBind;return D.a.createElement("div",{className:"productEditWrap restTabStyle tabSwitching"},D.a.createElement("div",{className:"header-tool"},D.a.createElement("p",null,"商品详情")),j?D.a.createElement(O.a,{type:"card",activeKey:this.state.activeKey,onChange:function(t){return e.changeTab(t)}},j.map((function(e){return D.a.createElement(Xa,{tab:D.a.createElement("span",null,e.name),key:e.id})}))):"",D.a.createElement(P.a.Provider,{value:c},D.a.createElement(r.a,{loading:!1,active:!0,paragraph:{rows:10}},D.a.createElement(o.a,{onFinish:this.shopclose,onSubmit:this.handleSubmit,style:{marginBottom:"160px"}},D.a.createElement("div",{style:{display:1==a?"block":"none"}},D.a.createElement(Rt,{rowData:this.state._parms,type:s.type,form:i,sizeChartBind:u,sizeChartTable:this.state.sizeChartTable,size_stage:this.state.size_stage})),D.a.createElement("div",{style:{display:2==a?"block":"none"}},D.a.createElement(aa,{form:i})),D.a.createElement("div",{style:{display:3==a?"block":"none"}},D.a.createElement(ba,{form:i})),D.a.createElement("div",{style:{display:4==a?"block":"none"}},D.a.createElement(ka,{form:i})),D.a.createElement("div",{style:{display:5==a?"block":"none"}},D.a.createElement(Na,{form:i})),D.a.createElement("div",{style:{display:6==a?"block":"none"}},D.a.createElement(Pa,{form:i})),D.a.createElement("div",{className:"shop-footer-btn"},D.a.createElement("div",null,D.a.createElement(l.a,{type:"primary",htmlType:"submit",className:"saveForm"},"保存"),D.a.createElement(l.a,{htmlType:"button",onClick:function(){return e.shopclose()},className:"close"},"关闭")))),this.state.visibleAddShops&&D.a.createElement(Ua,{visibleAddShops:this.state.visibleAddShops,setSelectRowsadd:this.setSelectRows,toggleWin:this.toggleWin}),this.state.issetAttributes&&D.a.createElement(Ja,null))))}}]),a}(x.Component);en.propTypes={shopAddImgAsync:ua.a.func,shopdeleImgAsync:ua.a.func};t.default=o.a.create()(Object(Se.connect)((function(e){return e.Shops}),{shopAddImgAsync:ga,shopdeleImgAsync:ya})(en))}}]);