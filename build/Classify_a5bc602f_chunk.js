(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1589:function(e,t,a){},1758:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return we}));a(191);var n=a(114),r=a.n(n),i=(a(221),a(125)),o=a.n(i),l=(a(82),a(41)),c=a.n(l),s=(a(73),a(30)),u=a.n(s),f=a(3),p=a.n(f),d=(a(123),a(51)),g=a.n(d),m=(a(88),a(39)),h=a.n(m),y=a(25),v=a.n(y),b=a(20),_=a.n(b),E=a(26),C=a.n(E),O=a(22),w=a.n(O),S=a(16),P=a.n(S),j=a(1),k=a.n(j),D=(a(1589),a(1490)),x=a(218),V=a(55),R=a(10),N=(a(190),a(87)),T=a.n(N),I=(a(122),a(42)),L=a.n(I),A=a(28),F=a.n(A),M=(a(89),a(40)),W=a.n(M),B=(a(121),a(45)),q=a.n(B),J=a(59),z=a(219),H=(a(734),a(377)),K=a.n(H),U=(a(81),a(18)),G=a.n(U),Q=a(74),X=a.n(Q),Y=a(376),Z=a.n(Y);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=P()(e);if(t){var r=P()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var ee=!0,te=function(e){C()(a,e);var t=$(a);function a(e,n){var r;return v()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){},r.handlePreview=function(){var e=Z()(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:r.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.fileList;r.setState({fileList:t});var a={};t.map((function(e){a[r.props.id]=e.response?e.response.resultData:""})),0==t.length&&(a[r.props.id]=""),r.props.uploadchange(a)},r.handleCancel=function(){r.setState({previewVisible:!r.state.previewVisible})},r.state={fileList:[]},r}return _()(a,null,[{key:"getDerivedStateFromProps",value:function(e){return"data-__meta"in e&&e["data-__meta"].initialValue&&ee?(ee=!1,{fileList:[{uid:"-1",name:"image.png",status:"done",url:e["data-__meta"].initialValue}]}):null}}]),_()(a,[{key:"render",value:function(){var e=this.state,t=e.previewImage,a=void 0===t?"":t,n=e.fileList,r=void 0===n?[]:n,i=e.previewVisible;r.length;var o={Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},l=k.a.createElement("div",null,k.a.createElement(G.a,{type:"plus"}),k.a.createElement("div",{className:"ant-upload-text"},"Upload"));return k.a.createElement("div",null,k.a.createElement(K.a,{action:"https://api.ohhmail.com/api/admin/category_image_upload",listType:"picture-card",headers:o,fileList:r,data:{category_name:"category"},onPreview:this.handlePreview,onChange:this.handleChange},r.length>=1?null:l),k.a.createElement(g.a,{visible:i,footer:null,onCancel:this.handleCancel},k.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(j.Component);te.defaultProps={},te.contextType=x.a;var ae=te;function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=P()(e);if(t){var r=P()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var oe=q.a.Item,le=W.a.Option,ce=function(e){C()(a,e);var t=ie(a);function a(e,n){var r;return v()(this,a),(r=t.call(this,e,n)).state={categoryStr:[],infndata:{}},r.beforeCallback=function(e,t){var a=r.context.rowData,n=void 0===a?{}:a,i=0==Object.keys(n).length,o={parent_id:e.parent_id instanceof Array?e.parent_id[e.parent_id.length-1]:e.parent_id,name:e.name,name_cn:e.name_cn,filter_ids:e.filter_ids.toString(),sort_order:e.sort_order,meta_title:e.meta_title,meta_description:e.meta_description,meta_keyword:e.meta_keyword,url:e.url,advertising_image:e.advertising_image};i||(o.id=n.id),t(o),r.context.getproductCategorySelectAll()},r.onCancel=function(){r.props.form.resetFields(),r.context.toggleWin("visibleCategory",{})},r.handleChange=function(){},r.uploadchange=function(e){r.props.form.setFieldsValue(re({},e))},r}return _()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.context.rowData,a=void 0===t?{}:t;a.id&&Object(R.b)(V.a.get_category,{id:a.id}).then((function(t){e.setState({infndata:t.resultData})}))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.get_filter_list,n=this.context,r=n.rowData,i=void 0===r?{}:r,o=n.ProductCategoryDataList,l=0==Object.keys(i).length,c=this.state.infndata,s=re({beforeCallback:this.beforeCallback,title:l?k.a.createElement("span",null,"新增产品分类"):k.a.createElement("span",null,"编辑产品分类"),visible:this.context.visibleCategory,method:V.a.save_category,onCancel:this.onCancel,form:this.props.form},this.context.batConfig),f=[];f.push(c.parent_id);var p=[];c.filter_group&&c.filter_group.map((function(e){p.push(e.filter_id)}));return k.a.createElement(z.ModalComp,s,k.a.createElement(q.a,{className:"resetFormStyle",style:{padding:"20px"}},k.a.createElement(T.a,null,k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"上级分类"},J.f),t("parent_id",{initialValue:f?0==f?"顶级分类":f:[],rules:[{required:!0,message:"请选择分类"}]})(k.a.createElement(W.a,{allowClear:!0},o.map((function(e){return k.a.createElement(le,{value:e.id,key:e.id},e.name)})))))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"分类名称"},J.f),t("name",{initialValue:c.name||"",rules:[{required:!0,message:"请输入名称"}]})(k.a.createElement(u.a,null)))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"分类中文名称"},J.f),t("name_cn",{initialValue:c.name_cn||"",rules:[{required:!0,message:"请输入名称"}]})(k.a.createElement(u.a,null)))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"筛选器组"},J.f),t("filter_ids",{initialValue:p||[]})(k.a.createElement(W.a,{mode:"multiple",placeholder:"Please select",defaultValue:["a10","c12"],onChange:function(){return e.handleChange},style:{width:"100%"}},a.map((function(e){return k.a.createElement(le,{key:e.id,value:e.id},e.alias)})))))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"排序"},J.f),t("sort_order",{initialValue:c.sort_order||""})(k.a.createElement(u.a,null)))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"自定义链接"},J.f),t("url",{initialValue:c.url||""})(k.a.createElement(u.a,{placeholder:"支持字母（英文小写），下划线（_），数字。且必须以字母开头！"})))),"     ",k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"SEO标题"},J.f),t("meta_title",{initialValue:c.meta_title||""})(k.a.createElement(u.a,null)))),"     ",k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"SEO关键字"},J.f),t("meta_keyword",{initialValue:c.meta_keyword||""})(k.a.createElement(u.a,null)))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"SEO描述"},J.f),t("meta_description",{initialValue:c.meta_description||""})(k.a.createElement(u.a,null)))),k.a.createElement(L.a,{span:24},k.a.createElement(oe,F()({label:"广告图"},J.f),t("advertising_image",{initialValue:c.advertising_image?c.advertising_image:""})(k.a.createElement(ae,{uploadchange:this.uploadchange})))))))}}]),a}(j.Component);ce.defaultProps={},ce.contextType=x.a;var se=q.a.create()(ce),ue=(a(743),a(393)),fe=a.n(ue);function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=P()(e);if(t){var r=P()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var ge=q.a.Item,me=function(e){C()(a,e);var t=de(a);function a(e,n){var r;return v()(this,a),(r=t.call(this,e,n)).state={categoryStr:[]},r.beforeCallback=function(e,t){if(e.dest_category_id){var a={};a.category_id=r.context.rowData.id,a.dest_category_id=e.dest_category_id[e.dest_category_id.length-1],t(a)}else h.a.info("请选择分类")},r.onChangeCategory=function(e){r.setState({categoryStr:e})},r.onCancel=function(){r.props.form.resetFields(),r.context.toggleWin("visibleTransfer",{})},r}return _()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.context.ProductCategoryDataList,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({wrapClassName:"shop-Modal",beforeCallback:this.beforeCallback,closable:!1,title:!1,visible:this.context.visibleTransfer,onCancel:this.onCancel,form:this.props.form,method:V.a.transfer_category_product},this.context.batConfig);return k.a.createElement(z.ModalComp,a,k.a.createElement(q.a,{className:"resetFormStyle",style:{marginTop:"20px",overflow:"hidden",padding:"20px"}},k.a.createElement(T.a,null,k.a.createElement(L.a,{span:24},k.a.createElement(ge,F()({label:"选择分类"},J.d),e("dest_category_id",{rules:[{required:!1,message:"请选择分类"}]})(k.a.createElement(fe.a,{options:t,expandTrigger:"click",showSearch:!0,onChange:this.onChangeCategory,placeholder:"",changeOnSelect:!0,fieldNames:{label:"name",value:"id",children:"children"}})))))))}}]),a}(j.Component);me.defaultProps={},me.contextType=x.a;var he,ye,ve,be=q.a.create()(me),_e=a(1489);function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=P()(e);if(t){var r=P()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return w()(this,a)}}var we=(ye=he=Object(D.a)({toolConfig:{list:{action:"get_categorys_pager",params:{}}}})(ve=function(e){C()(a,e);var t=Oe(a);function a(e,n){var r;v()(this,a),(r=t.call(this,e,n)).onChange=function(e){r.setState({inpValu:e.target.value})},r.onblur=function(e){Object(R.b)(V.a.save_category_list,{category_id:e.id,sort_order:r.state.inpValu}).then((function(e){200==e.resultId&&h.a.success("修改成功")}))},r.getproductCategorySelectAll=function(){Object(R.b)(V.a.get_categorys_pager).then((function(e){var t=e.resultData;r.setState({ProductCategoryDataList:t,loading:!1})}))},r.deleteButton=function(e){var t={id:e.id};g.a.confirm({title:"操作提示?",content:"是否确认删除？删除将导致产品引用部分全部失效",onOk:function(){Object(R.b)(V.a.category_del,Ce({},t)).then((function(e){200==e.resultId?(h.a.success(e.resultMsg),r.getproductCategorySelectAll()):h.a.error(e.resultMsg)}))}})},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",a=arguments.length>1?arguments[1]:void 0;r.setState((e={},p()(e,t,!r.state[t]),p()(e,"otherConfig",a),e))},r.state={inpValu:"",loading:!0},r.flag=!1;return r.columns=[{dataIndex:"name",title:"商品分类",width:"25%",key:"name"},{dataIndex:"name_cn",title:"商品中文名",width:"15%",key:"name_cn"},{dataIndex:"total_product",title:"商品数量",width:"15%",key:"total_product"},{dataIndex:"sort_order",title:"排序",width:"15%",key:"sort_order",render:function(e,t,a){return k.a.createElement("span",null,k.a.createElement(u.a,{defaultValue:e,onChange:function(e){r.onChange(e)},onBlur:function(){return r.onblur(t)},style:{width:80}}))}},{dataIndex:"id",key:"id",title:"操作",width:"27%",render:function(e,t,a){return k.a.createElement("div",{className:"operatingButton"},k.a.createElement(_e.a,(n=t,{config:[{title:"转移商品",noCheck:!0,ghost:!0,onClick:function(){r.toggleWin("visibleTransfer",{rowData:n})}},{title:"编辑",noCheck:!0,ghost:!0,onClick:function(){r.toggleWin("visibleCategory",{rowData:n})}},{title:"删除",noCheck:!0,type:"danger",ghost:!0,onClick:function(){r.deleteButton(n)}}],method:"",unicode:"ids|id",batConfig:r.props.batConfig,rowData:n})));var n}}],r}return _()(a,[{key:"componentDidMount",value:function(){var e=this;this.getproductCategorySelectAll(),Object(R.b)(V.a.get_filter_list).then((function(t){e.setState({get_filter_list:t.resultData})}))}},{key:"render",value:function(){var e=this,t=this.state.ProductCategoryDataList,a=Ce(Ce({},this.state.otherConfig),{},{toggleWin:this.toggleWin,visibleCategory:this.state.visibleCategory,visibleTransfer:this.state.visibleTransfer,batConfig:Ce(Ce({},this.props.batConfig),{},{changeSearch:this.getproductCategorySelectAll}),changeSearch:this.props.changeSearch,ProductCategoryDataList:t,getproductCategorySelectAll:this.getproductCategorySelectAll});return k.a.createElement("div",{className:"userStyle"},k.a.createElement(x.a.Provider,{value:a},k.a.createElement("div",{className:"header-tool"},k.a.createElement("p",null,"商品分类"),k.a.createElement("div",{className:"action-bar"},k.a.createElement(c.a,{type:"primary",shape:"round",onClick:function(){return e.toggleWin("visibleCategory",{})}},"新增商品"))),k.a.createElement(r.a,{spinning:this.state.loading},k.a.createElement("div",{className:"content-main overflowHidden"},k.a.createElement("div",{className:"content-table"},k.a.createElement(o.a,{childrenColumnName:"children",columns:this.columns,pagination:!1,dataSource:t}),","))),this.state.visibleCategory&&k.a.createElement(se,{get_filter_list:this.state.get_filter_list}),this.state.visibleTransfer&&k.a.createElement(be,null)))}}]),a}(j.Component))||ve,he.defaultProps={},ye)}}]);