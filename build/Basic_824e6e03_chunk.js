(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1693:function(e,t,a){},1770:function(e,t,a){"use strict";a.r(t);a(82);var n=a(41),r=a.n(n),i=(a(81),a(18)),c=a.n(i),l=a(28),s=a.n(l),o=(a(190),a(87)),u=a.n(o),p=(a(122),a(42)),f=a.n(p),m=a(3),d=a.n(m),y=(a(88),a(39)),v=a.n(y),h=a(25),g=a.n(h),E=a(20),b=a.n(E),w=a(90),S=a.n(w),k=a(26),O=a.n(k),D=a(22),N=a.n(D),x=a(16),j=a.n(x),C=(a(123),a(51)),P=a.n(C),R=(a(121),a(45)),V=a.n(R),_=(a(73),a(30)),L=a.n(_),A=a(1),I=a.n(A),F=a(59),M=(a(1693),{basics:[{type:"input",name:"网站代码",key:"prefix",rules:!0},{type:"input",name:"网站名称",key:"name",rules:!0},{type:"input",name:"联系邮箱",key:"email",rules:!0},{type:"input",name:"联系电话",key:"phone",rules:!0},{type:"input",name:"联系地址",key:"address",rules:!0},{type:"textArea",name:"版权信息",key:"copyright ",rules:!0,span:24},{type:"IMG",name:"favicon",key:"favicon",rules:!0}],meta:[{type:"input",name:"SEO标题",key:"title",rules:!0},{type:"input",name:"SEO关键字",key:"keywords",rules:!0},{type:"textArea",name:"SEO描述",key:"description",rules:!0,span:24},{type:"textArea",name:"robots",key:"robots",span:24}]}),T=a(731),B=(a(734),a(377)),J=a.n(B),q=a(74),G=a.n(q),U=a(376),z=a.n(U),K=a(218),H=a(24);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=j()(e);if(t){var r=j()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return N()(this,a)}}var W=function(e){O()(a,e);var t=Q(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){r.props["data-__meta"]&&r.setState({fileList:[{uid:"-1",name:"image.png",status:"done",url:r.props["data-__meta"].initialValue}]})},r.handlePreview=function(){var e=z()(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:r.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.fileList;r.setState({fileList:t});var a={};t.map((function(e){a[r.props.id]=e.response?e.response.resultData:""})),0==t.length&&(a[r.props.id]=""),r.props.uploadchange(a)},r.handleCancel=function(){r.setState({previewVisible:!r.state.previewVisible})},r.state={fileList:[]},r}return b()(a,[{key:"render",value:function(){Object(H.j)().accessToken;var e=this.state,t=e.previewImage,a=void 0===t?"":t,n=e.fileList,r=e.previewVisible,i={Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},l=I.a.createElement("div",null,I.a.createElement(c.a,{type:"plus"}),I.a.createElement("div",{className:"ant-upload-text"},"Upload"));return I.a.createElement("div",null,I.a.createElement(J.a,{action:"https://api.ohhmail.com/api/admin/website_image_upload",listType:"picture-card",headers:i,fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=1?null:l),I.a.createElement(P.a,{visible:r,footer:null,onCancel:this.handleCancel},I.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),a}(A.Component);W.defaultProps={},W.contextType=K.a;var X=W;function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=j()(e);if(t){var r=j()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return N()(this,a)}}var $=L.a.TextArea,ee=V.a.Item,te=P.a.confirm,ae=function(e){O()(a,e);var t=Z(a);function a(e,n){var r;return g()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){T.a.order.get_setting_list({type:1}).then((function(e){e&&r.setState({rowData:e.resultData.setting.site})}))},r.save=function(){r.props.form.validateFields((function(e,t){if(!e){var a=r.state.rowData,n=void 0===a?{}:a;for(var i in t)if(-1!=i.indexOf("#")){var c=i.split("#");t[i]&&(n.SNS[c[0]][c[1]]=t[i])}else n[i]=t[i];T.a.order.save_setting({setting:JSON.stringify(n),type:1}).then((function(e){e&&v.a.success("保存成功")}))}}))},r.uploadchange=function(e){r.props.form.setFieldsValue(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){d()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},r.formchange=function(e){var t=r.props.form.getFieldDecorator,a=r.state,n=a.rowData,i=void 0===n?{}:n,c=(a.fileList,I.a.createElement(L.a,null));return"textArea"==e.type?c=I.a.createElement($,{rows:4}):"IMG"==e.type&&(c=I.a.createElement(X,{uploadchange:r.uploadchange})),I.a.createElement(f.a,{span:e.span||7},I.a.createElement(ee,{label:e.name},t(e.key,{initialValue:i[e.key]?i[e.key]:"",rules:[{required:e.rules,message:"请输入".concat(e.name)}]})(c)))},r.snsclose=function(e){var t=r.state.rowData,a=void 0===t?{}:t,n=S()(r);te({title:"确定是否删除该数据?",content:"",onOk:function(){a.SNS.splice(e,1),n.setState({rowData:a})},onCancel:function(){}})},r.snsadd=function(){var e=r.state.rowData,t=void 0===e?{}:e;t.SNS.push({title:"",url:"",image:""}),r.setState({rowData:t})},r.state={},r}return b()(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.rowData,n=void 0===a?{}:a;return I.a.createElement("div",{className:"Basic-main"},I.a.createElement("div",{className:"header-tool"},I.a.createElement("p",null,"基本设置")),I.a.createElement(V.a,{className:"bulletbox-form"},I.a.createElement(u.a,{gutter:16,className:"basic-item"},I.a.createElement("p",null,"基础信息"),M.basics.map((function(t){return e.formchange(t)}))),I.a.createElement(u.a,{gutter:16,className:"basic-item"},I.a.createElement("p",null,"Meta设置"),M.meta.map((function(t){return e.formchange(t)}))),I.a.createElement("div",{className:"basic-item"},I.a.createElement("p",null,"SNS"),n.SNS?n.SNS.map((function(a,n){return I.a.createElement("div",{className:"sns-item"},I.a.createElement(ee,s()({label:"SNS"},F.a),t("".concat(n,"#title"),{initialValue:a.title?a.title:""})(I.a.createElement(L.a,null))),I.a.createElement(ee,s()({label:"URL"},F.a),t("".concat(n,"#url"),{initialValue:a.url?a.url:""})(I.a.createElement(L.a,null))),I.a.createElement(ee,s()({label:"图标"},F.a),t("".concat(n,"#image"),{initialValue:a.image?a.image:""})(I.a.createElement(X,{uploadchange:e.uploadchange}))),I.a.createElement(c.a,{type:"close-circle",onClick:function(){return e.snsclose(n)}}))})):"",I.a.createElement(c.a,{type:"plus-square",className:"snsadd",onClick:function(){return e.snsadd()}})),I.a.createElement("div",{className:"shop-footer-btn"},I.a.createElement(r.a,{type:"primary",onClick:function(){return e.save()}},"保存"))))}}]),a}(I.a.Component);t.default=V.a.create()(ae)}}]);