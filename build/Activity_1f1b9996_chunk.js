(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1714:function(e,t,a){},1752:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return je}));a(1491);var n=a(1492),r=a.n(n),c=a(373),i=a.n(c),l=(a(1495),a(1496)),o=a.n(l),s=(a(124),a(64)),u=a.n(s),m=(a(81),a(18)),p=a.n(m),f=a(3),h=a.n(f),d=(a(88),a(39)),g=a.n(d),y=a(25),b=a.n(y),v=a(20),E=a.n(v),_=a(26),O=a.n(_),x=a(22),D=a.n(x),w=a(16),S=a.n(w),j=(a(374),a(220)),P=a.n(j),C=a(1),k=a.n(C),R=a(55),Y=a(731),N=(a(190),a(87)),M=a.n(N),F=(a(122),a(42)),V=a.n(F),H=a(218),q=a(1489),J=(a(283),a(160)),T=a.n(J),W=a(28),I=a.n(W),A=a(69),L=a.n(A),G=(a(378),a(126)),U=a.n(G),K=(a(121),a(45)),z=a.n(K),B=(a(73),a(30)),Q=a.n(B),X=(a(732),a(375)),Z=a.n(X),$=a(219),ee=a(59),te=a(5),ae=a.n(te);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var ie=Z.a.Group,le=Q.a.TextArea,oe=z.a.Item,se=U.a.RangePicker,ue=function(e){O()(a,e);var t=ce(a);function a(e,n){var r;return b()(this,a),(r=t.call(this,e,n)).beforeCallback=function(e,t){var a=r.context.rowData,n=void 0===a?{}:a;n.id&&(e.id=n.id),e.id=n.id||"","rule1prise"==e.rule1?(e.purchase_number_min=0,e.purchase_number_max=0):(e.purchase_amount_max=0,e.purchase_amount_min=0,e.purchase_number_min=0==e.purchase_number_min?1:e.purchase_number_min,e.purchase_number_max=0==e.purchase_number_max?1:e.purchase_number_max),"rule2discount"==e.rule2?e.preferential=0:(e.discount=0,e.preferential=0==e.preferential?1:e.preferential);var c=e.range_time||[],i=L()(c,2),l=i[0],o=i[1];e.date_start=l&&ae()(l).format("YYYY-MM-DD HH:mm:ss"),e.date_end=o&&ae()(o).format("YYYY-MM-DD HH:mm:ss"),delete e.range_time,e.status=1==e.status?1:0,Y.a.order.save_full_mall_activity(re({},e)).then((function(e){e&&(r.props.changeSearch(),r.context.toggleWin("Setting"))}))},r.onCancel=function(){r.context.toggleWin("Setting")},r.state={},r}return E()(a,[{key:"componentDidMount",value:function(){this.context.rowData}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.context.rowData,a=void 0===t?{}:t,n=re({beforeCallback:this.beforeCallback,title:"优惠卷",method:Y.a.save_message_sign,visible:this.context.Setting,onCancel:this.onCancel,form:this.props.form},this.context.batConfig),r={width:"70px",marginLeft:"5px",marginRight:"5px"};return k.a.createElement($.ModalComp,n,k.a.createElement(z.a,{className:"bulletbox-form"},k.a.createElement("div",{className:"collapse-style",style:{padding:"20px"}},k.a.createElement(M.a,{style:{marginTop:"16px"}},k.a.createElement(V.a,{span:24},k.a.createElement(oe,I()({label:"活动名称"},ee.d),e("name",{initialValue:a.name?a.name:"",rules:[{required:!0,message:'请输入活动名称" '}]})(k.a.createElement(Q.a,{placeholder:"不在前台展示"})))),k.a.createElement(V.a,{span:24,style:{marginTop:10}},k.a.createElement(oe,I()({label:"满减条件"},ee.d),k.a.createElement(V.a,{span:24},e("rule1",{initialValue:"{}"!=JSON.stringify(a)&&parseFloat(a.purchase_amount_max)>0?"rule1prise":"rule1Num",rules:[{required:!0,message:"必填项"}]})(k.a.createElement(ie,null,k.a.createElement(Z.a,{value:"rule1prise"},k.a.createElement("span",null,"买满"),e("purchase_amount_min",{initialValue:"{}"!=JSON.stringify(a)?parseFloat(a.purchase_amount_min).toFixed(2):"",rules:[{required:!1,message:"必填项"}]})(k.a.createElement(Q.a,{placeholder:">",style:r})),k.a.createElement("span",null," - "),e("purchase_amount_max",{initialValue:"{}"!=JSON.stringify(a)?parseFloat(a.purchase_amount_max).toFixed(2):"",rules:[{required:!1,message:"必填项"}]})(k.a.createElement(Q.a,{placeholder:"≤",style:r,onChange:this.numberMax})),k.a.createElement("span",null,"金额（USD）")),k.a.createElement(Z.a,{value:"rule1Num"},k.a.createElement("span",null,"买满"),e("purchase_number_min",{initialValue:"{}"!=JSON.stringify(a)?parseFloat(a.purchase_number_min).toFixed(0):1,rules:[{required:!1,message:"必填项"}]})(k.a.createElement(T.a,{min:1,placeholder:">",style:r})),k.a.createElement("span",null," - "),e("purchase_number_max",{initialValue:"{}"!=JSON.stringify(a)?parseFloat(a.purchase_number_max).toFixed(0):1,rules:[{required:!1,message:"必填项"}]})(k.a.createElement(T.a,{min:1,placeholder:"≤",style:r})),k.a.createElement("span",null,"件数")))))),k.a.createElement(oe,I()({label:"满减金额"},ee.d),k.a.createElement(V.a,{span:24},e("rule2",{initialValue:"{}"!=JSON.stringify(a)&&parseFloat(a.preferential)>0?"rule2price":"rule2discount",rules:[{required:!0,message:"必填项"}]})(k.a.createElement(ie,null,k.a.createElement(Z.a,{value:"rule2price"},k.a.createElement("span",null,"满减"),e("preferential",{initialValue:a.preferential||1,rules:[{required:!1,message:"必填项"}]})(k.a.createElement(T.a,{min:"1",max:99,placeholder:">",style:r})),k.a.createElement("span",null,"金额（USD）")),k.a.createElement(Z.a,{value:"rule2discount"},k.a.createElement("span",null,"折扣"),e("discount",{initialValue:a.discount||"",rules:[{required:!1,message:"必填项"}]})(k.a.createElement(T.a,{min:"1",max:100,placeholder:">",style:r})),k.a.createElement("span",null,"%")))),k.a.createElement("span",null,"例如:(折扣20%代表减去原金额20%)")))),k.a.createElement(V.a,{span:24},k.a.createElement(oe,I()({label:"有效时间"},ee.d),e("range_time",{initialValue:"{}"!=JSON.stringify(a)?[ae()(a.date_start,"YYYY-MM-DD HH:mm"),ae()(a.date_end,"YYYY-MM-DD HH:mm")]:null,rules:[{required:!0,message:"必填项"}]})(k.a.createElement(se,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"],style:{width:"100%"}})))),k.a.createElement(V.a,{span:24},k.a.createElement(oe,I()({label:"活动描述"},ee.d),e("activity_describe",{initialValue:a.activity_describe?a.activity_describe:""})(k.a.createElement(le,null)))),k.a.createElement(V.a,{span:24},k.a.createElement(oe,I()({label:"排序"},ee.d),e("sort_order",{initialValue:a.sort_order?a.sort_order:""})(k.a.createElement(Q.a,null)))),k.a.createElement(V.a,{span:24},k.a.createElement(oe,I()({label:"状态"},ee.d),e("status",{initialValue:a.status?a.status+"":"1"})(k.a.createElement(Z.a.Group,null,k.a.createElement(Z.a,{value:"1"},"启用"),k.a.createElement(Z.a,{value:"0"},"禁用")))))))))}}]),a}(C.Component);ue.defaultProps={},ue.contextType=H.a;var me=z.a.create()(ue);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var fe=function(e){O()(a,e);var t=pe(a);function a(e,n){var r;return b()(this,a),(r=t.call(this,e,n)).componentDidMount=function(){},r.tablist=function(){},r.state={Checkboxdata:[]},r}return E()(a,[{key:"render",value:function(){var e=this,t=this.context.activeKey,a={config:[{title:"添加",onAuth:"add",noCheck:!0,method:"",onClick:function(){return e.context.toggleWin("list"==t?"Addlist":"Setting")}}],unicode:"",batConfig:this.context.batConfig};return k.a.createElement("div",{className:"action-bar"},k.a.createElement(M.a,{type:"flex",justify:"space-between",align:"middle",gutter:10},k.a.createElement(V.a,null,k.a.createElement(q.a,a))),this.context.Setting&&k.a.createElement(me,{changeSearch:this.props.changeSearch}))}}]),a}(C.Component);fe.defaultProps={},fe.contextType=H.a;var he,de,ge,ye=a(1493),be=a(1494);function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}var _e,Oe=(de=he=z.a.create()(ge=function(e){O()(a,e);var t=Ee(a);function a(e,n){var r;return b()(this,a),(r=t.call(this,e,n)).state={},r.handleFormData=function(e){r.props.changeSearch(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},r.state={},r}return E()(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return k.a.createElement(be.a,{loading:this.props.loading,SearchConf:[{type:"input",labelConf:{name:"任务名称",key:"keyword"},span:6}],handleFormData:this.handleFormData})}}]),a}(C.Component))||ge,he.defaultProps={},de),xe=a(1490);a(1714);function De(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?De(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):De(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return D()(this,a)}}P.a.TabPane;var je=Object(xe.a)({toolConfig:{list:{action:"get_full_mall_activity_pager"}}})(_e=function(e){O()(a,e);var t=Se(a);function a(e,n){var r;b()(this,a),(r=t.call(this,e,n)).onChange=function(e,t){Y.a.order.set_full_mall_activity_status({id:t,status:e?1:0}).then((function(e){e&&(g.a.success("修改成功"),r.props.changeSearch({}))}))},r.morelink=function(e,t,a){var n="/"+e+"/"+a;r.props.goLink(n,{title:t})},r.componentDidMount=function(){r.props.changeSearch({})},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.state.otherConfig,c=void 0===n?{}:n;c=h()({rowData:a},t,!r.state[t]),r.setState((e={},h()(e,t,!r.state[t]),h()(e,"otherConfig",c),h()(e,"rowData",a),e))},r.jumpPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",n=e+"/"+t+"/"+a,r=window.location.origin+"/#/"+n;window.open(r)},r.listdata=[],r.state={areaList:[],channel_contrast:[],listdata:[]};return r.columns=[{title:"活动名称",dataIndex:"name"},{title:"开始时间",dataIndex:"date_start"},{title:"结束时间",dataIndex:"date_end"},{title:k.a.createElement("div",null,"状态    ",k.a.createElement(u.a,{title:"开启后将在前台进行显示"},k.a.createElement(p.a,{style:{color:"#4486F7"},type:"question-circle"}))),dataIndex:"status",width:100,render:function(e,t){return k.a.createElement(o.a,{defaultChecked:1==e,onChange:function(e){return r.onChange(e,t.id)}})}},{title:"操作",dataIndex:"id",width:300,fixed:"right",render:function(e,t){return k.a.createElement(q.a,(a=t,{config:[{title:"编辑",onAuth:"add",noCheck:!0,onClick:function(){return r.toggleWin("Setting",a)}},{title:"删除",onAuth:"add",noCheck:!0,type:"danger",method:R.a.mail_setting_del}],batConfig:r.props.batConfig,rowData:a,paramData:{id:a.id}}));var a}}],r}return E()(a,[{key:"render",value:function(){var e=this.state,t=e.channel_contrast,a=e.rowData,n=we({columns:this.columns},this.props.tableConfig);i()(this.props);var c=we(we({},this.state.otherConfig),{},{toggleWin:this.toggleWin,jumpPage:this.jumpPage,batConfig:this.props.batConfig,channel_contrast:t,changeSearch:this.props.changeSearch,rowData:a});return k.a.createElement("div",{className:"tabSwitching"},k.a.createElement("div",{className:"userStyle listStyle"},k.a.createElement(H.a.Provider,{value:c},k.a.createElement(Oe,{changeSearch:this.props.changeSearch,channel_contrast:t}),k.a.createElement("div",{className:"header-tool"},k.a.createElement("p",null,"促销活动"),k.a.createElement(fe,{changeSearch:this.props.changeSearch,values:this.props.values})),k.a.createElement(r.a,{className:"content-main"},k.a.createElement("div",{className:"content-table"},k.a.createElement(ye.a,n))))))}}]),a}(C.Component))||_e}}]);