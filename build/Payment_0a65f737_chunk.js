(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1710:function(e,t,n){},1743:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ve}));n(1491);var a,r,o,c=n(1492),i=n.n(c),l=n(373),s=n.n(l),u=(n(73),n(30)),p=n.n(u),f=(n(1495),n(1496)),d=n.n(f),m=(n(124),n(64)),h=n.n(m),g=(n(81),n(18)),v=n.n(g),y=n(3),b=n.n(y),E=(n(88),n(39)),O=n.n(E),w=n(25),x=n.n(w),j=n(20),C=n.n(j),D=n(26),P=n.n(D),S=n(22),_=n.n(S),k=n(16),R=n.n(k),V=n(1),F=n.n(V),N=n(731),T=n(1493),I=(n(121),n(45)),W=n.n(I),q=n(1494);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var r=R()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var B=(r=a=W.a.create()(o=function(e){P()(n,e);var t=M(n);function n(e,a){var r;return x()(this,n),(r=t.call(this,e,a)).state={},r.handleFormData=function(e){r.props.changeSearch(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},r.state={},r}return C()(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=[{type:"input",labelConf:{name:"支付名称",key:"name"},span:6},{labelConf:{name:"状态",key:"status"},span:6,data:[{name:"启用",id:"2"},{name:"禁用",id:"3"}]||[]}];return F.a.createElement(q.a,{loading:this.props.loading,SearchConf:e,handleFormData:this.handleFormData})}}]),n}(V.Component))||o,a.defaultProps={},r),A=n(1490),J=n(218),U=(n(190),n(87)),G=n.n(U),z=(n(732),n(375)),K=n.n(z),H=(n(122),n(42)),Q=n.n(H),X=n(28),Y=n.n(X),Z=n(69),$=n.n(Z),ee=n(219),te=n(59),ne=(n(123),n(51)),ae=n.n(ne),re=(n(734),n(377)),oe=n.n(re),ce=n(74),ie=n.n(ce),le=n(376),se=n.n(le),ue=n(24);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var r=R()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var fe=function(e){P()(n,e);var t=pe(n);function n(e,a){var r;return x()(this,n),(r=t.call(this,e,a)).componentDidMount=function(){r.props.value&&r.setState({fileList:[{uid:"-1",name:"image.png",status:"done",url:r.props.value}]})},r.handlePreview=function(){var e=se()(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,getBase64(t.originFileObj);case 3:t.preview=e.sent;case 4:r.setState({previewImage:t.url||t.preview,previewVisible:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.fileList;r.setState({fileList:t});var n={};t.map((function(e){n[r.props.id]=e.response?e.response.resultData:""})),0==t.length&&(n[r.props.id]=""),r.props.uploadchange(n)},r.handleCancel=function(){r.setState({previewVisible:!r.state.previewVisible})},r.state={fileList:[]},r}return C()(n,[{key:"render",value:function(){Object(ue.j)().accessToken;var e=this.state,t=e.previewImage,n=void 0===t?"":t,a=e.fileList,r=e.previewVisible,o={Authorization:"Bearer ".concat(localStorage.getItem("ACCESS_TOKEN"))},c=F.a.createElement("div",null,F.a.createElement(v.a,{type:"plus"}),F.a.createElement("div",{className:"ant-upload-text"},"Upload"));return F.a.createElement("div",null,F.a.createElement(oe.a,{action:"https://api.ohhmail.com/api/admin/myapp_image_upload",listType:"picture-card",headers:o,fileList:a,onPreview:this.handlePreview,onChange:this.handleChange},a.length>=1?null:c),F.a.createElement(ae.a,{visible:r,footer:null,onCancel:this.handleCancel},F.a.createElement("img",{alt:"example",style:{width:"100%"},src:n})))}}]),n}(V.Component);fe.defaultProps={},fe.contextType=J.a;var de=fe;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var r=R()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var ve=W.a.Item,ye=function(e){P()(n,e);var t=ge(n);function n(e,a){var r;return x()(this,n),(r=t.call(this,e,a)).beforeCallback=function(e,t){var n=r.context.rowData,a=void 0===n?{}:n,o={config:{}};Object.entries(e).map((function(e){var t=$()(e,2),n=t[0],a=t[1];if(-1!=n.indexOf("##")){"fixed_costs##"==n&&0!=a&&a?o.config.cost=0:"cost##"==n&&0!=a&&a&&(o.config.fixed_costs=0);var r=new RegExp("##",""),c=n.replace(r,"");o.config[c]=a}else o[n]=a})),o.config=JSON.stringify(o.config),o.id=a.id,N.a.order.edit_myapp(he({},o)).then((function(e){e&&(r.props.changeSearch(),r.context.toggleWin("Setting"))}))},r.onCancel=function(){r.context.toggleWin("Setting")},r.uploadchange=function(e){r.props.form.setFieldsValue(he({},e))},r.onChange=function(e){r.setState({costvalue:e.target.value})},r.state={},r}return C()(n,[{key:"componentDidMount",value:function(){this.context.rowData}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.costvalue,n=void 0===t?"":t,a=this.context.rowData,r=void 0===a?{}:a,o=r.config,c=void 0===o?{}:o,i=he({beforeCallback:this.beforeCallback,title:"支付详情",method:N.a.save_message_sign,visible:this.context.Setting,onCancel:this.onCancel,form:this.props.form},this.context.batConfig);return F.a.createElement(ee.ModalComp,i,F.a.createElement(W.a,{className:"bulletbox-form"},F.a.createElement("div",{className:"collapse-style",style:{padding:"20px"}},F.a.createElement(G.a,{style:{marginTop:"20px"}},F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:"支付方式名称"},te.d),e("name",{initialValue:r.name?r.name:"",rules:[{required:!0,message:'请输入支付方式名称" '}]})(F.a.createElement(p.a,{disabled:!0})))),F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:"图片上传"},te.d),e("image",{initialValue:r.image?r.image:"",rules:[{required:!0,message:'请输入图片上传" '}]})(F.a.createElement(de,{uploadchange:this.uploadchange})))),F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:"手续费设置"},te.d),F.a.createElement(K.a.Group,{onChange:this.onChange,defaultValue:c.fixed_costs?"1":"2"},F.a.createElement(K.a,{value:"1"},"按固定费用"),F.a.createElement(K.a,{value:"2"},"按百分比")),(n?1==n:0!=c.fixed_costs)?F.a.createElement(ve,Y()({label:""},te.d),e("fixed_costs##",{initialValue:c.fixed_costs||""})(F.a.createElement(p.a,{type:"number"}))):F.a.createElement(ve,Y()({label:""},te.d),e("cost##",{initialValue:c.cost||""})(F.a.createElement(p.a,{type:"number",style:{marginRight:"10px"}})),F.a.createElement(h.a,{title:"注意请不要输入超过1的数值"},F.a.createElement(v.a,{style:{color:"#4486F7"},type:"question-circle"}))))),Object.entries(c).map((function(t){var n=$()(t,2),a=n[0],r=n[1];if("cost"!=a&&"fixed_costs"!=a)return F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:a},te.d),e("".concat(a,"##"),{initialValue:r||"",rules:[{required:!0,message:"请输入".concat(a)}]})(F.a.createElement(p.a,null))))})),F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:"排序"},te.d),e("sort_order",{initialValue:r.sort_order?r.sort_order:""})(F.a.createElement(p.a,null)))),F.a.createElement(Q.a,{span:20},F.a.createElement(ve,Y()({label:"状态"},te.d),e("status",{initialValue:r.status?r.status+"":"2"})(F.a.createElement(K.a.Group,null,F.a.createElement(K.a,{value:"2"},"启用"),F.a.createElement(K.a,{value:"3"},"禁用")))))))))}}]),n}(V.Component);ye.defaultProps={},ye.contextType=J.a;var be=W.a.create()(ye),Ee=n(1489),Oe=n(1498);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var r=R()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var Ce=W.a.Item,De=function(e){P()(n,e);var t=je(n);function n(e,a){var r;return x()(this,n),(r=t.call(this,e,a)).beforeCallback=function(e,t){for(var n=r.context.rowData,a={id:(void 0===n?{}:n).id,something:["","",""]},o=1;o<4;o++)a.something[o-1]=UE.getEditor("wapcontainer".concat(o))?UE.getEditor("wapcontainer".concat(o)).getContent():"";N.a.order.edit_payment_description(xe({},a)).then((function(e){e&&(r.props.changeSearch(),r.context.toggleWin("description"))}))},r.onCancel=function(){r.context.toggleWin("description")},r.uploadchange=function(e){r.props.form.setFieldsValue(xe({},e))},r.state={},r}return C()(n,[{key:"componentDidMount",value:function(){this.context.rowData}},{key:"render",value:function(){this.props.form.getFieldDecorator;var e=this.context.rowData,t=(void 0===e?{}:e).something,n=void 0===t?[]:t,a=xe(xe({beforeCallback:this.beforeCallback,title:"支付详情",method:N.a.save_message_sign,visible:this.context.description,onCancel:this.onCancel,form:this.props.form},this.context.batConfig),{},{width:"1200px"});return F.a.createElement(ee.ModalComp,a,F.a.createElement(W.a,{className:"bulletbox-form"},F.a.createElement("div",{className:"collapse-style",style:{padding:"20px"}},F.a.createElement(G.a,{style:{marginTop:"20px"}},F.a.createElement(Q.a,{span:24},F.a.createElement(Ce,{label:F.a.createElement("span",null,"支付方式提示 ",F.a.createElement(h.a,{title:"开启后将在前台进行显示"},F.a.createElement(v.a,{style:{color:"#4486F7"},type:"question-circle"})))},F.a.createElement(Oe.a,{id:"wapcontainer1",richText:n[0]?n[0]:""}))),F.a.createElement(Q.a,{span:24},F.a.createElement(Ce,{label:F.a.createElement("span",null,"支付成功页面提示 ",F.a.createElement(h.a,{title:"富文本内容将在前台支付成功页面进行显示，可为空"},F.a.createElement(v.a,{style:{color:"#4486F7"},type:"question-circle"})))},F.a.createElement(Oe.a,{id:"wapcontainer2",richText:n[1]?n[1]:""}))),F.a.createElement(Q.a,{span:24},F.a.createElement(Ce,{label:F.a.createElement("span",null,"支付失败页面提示",F.a.createElement(h.a,{title:"富文本内容将在前台支付失败页面进行显示，可为空"},F.a.createElement(v.a,{style:{color:"#4486F7"},type:"question-circle"})))},F.a.createElement(Oe.a,{id:"wapcontainer3",richText:n[2]?n[2]:""})))))))}}]),n}(V.Component);De.defaultProps={},De.contextType=J.a;var Pe,Se=W.a.create()(De);n(1710);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=R()(e);if(t){var r=R()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return _()(this,n)}}var Ve=Object(A.a)({toolConfig:{list:{action:"get_myapp_list"}}})(Pe=function(e){P()(n,e);var t=Re(n);function n(e,a){var r;x()(this,n),(r=t.call(this,e,a)).onBlur=function(e,t,n){e.target.value!=n&&N.a.order.set_app_sort_order({id:t,sort_order:e.target.value}).then((function(e){e&&(r.props.changeSearch({}),O.a.success("修改成功"))}))},r.onChange=function(e,t){N.a.order.set_app_enable_disable({id:t,status:e?2:3}).then((function(e){e&&(r.props.changeSearch({}),O.a.success("修改成功"))}))},r.morelink=function(e,t,n){var a="/"+e+"/"+n;r.props.goLink(a,{title:t})},r.componentDidMount=function(){r.props.changeSearch({})},r.toggleWin=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"visible",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.state.otherConfig,o=void 0===a?{}:a;o=b()({rowData:n},t,!r.state[t]),r.setState((e={},b()(e,t,!r.state[t]),b()(e,"otherConfig",o),b()(e,"rowData",n),e))},r.jumpPage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",a=e+"/"+t+"/"+n,r=window.location.origin+"/#/"+a;window.open(r)},r.listdata=[],r.state={areaList:[],channel_contrast:[],listdata:[]};return r.columns=[{title:"支付方式",dataIndex:"name"},{title:"图片",dataIndex:"image",render:function(e,t){return F.a.createElement("img",{src:t.image,style:{width:"50px"}})}},{title:F.a.createElement("div",null,"状态    ",F.a.createElement(h.a,{title:"开启后将在前台进行显示"},F.a.createElement(v.a,{style:{color:"#4486F7"},type:"question-circle"}))),dataIndex:"status",width:100,render:function(e,t){return F.a.createElement(d.a,{defaultChecked:2==e,onChange:function(e){return r.onChange(e,t.id)}})}},{title:"排序",dataIndex:"sort_order",width:100,render:function(e,t){return F.a.createElement(p.a,{defaultValue:e,onBlur:function(n){return r.onBlur(n,t.id,e)}})}},{title:"操作",dataIndex:"id",width:300,fixed:"right",render:function(e,t){return F.a.createElement(Ee.a,(n=t,{config:[{title:"编辑",onAuth:"add",noCheck:!0,onClick:function(){return r.toggleWin("Setting",n)}},{title:"支付描述",onAuth:"add",noCheck:!0,onClick:function(){return r.toggleWin("description",n)}}],batConfig:r.props.batConfig,rowData:n,paramData:{is_column:1,id:n.id}}));var n}}],r}return C()(n,[{key:"render",value:function(){var e=this.state,t=e.channel_contrast,n=e.rowData,a=ke({columns:this.columns},this.props.tableConfig);s()(this.props);var r=ke(ke({},this.state.otherConfig),{},{toggleWin:this.toggleWin,jumpPage:this.jumpPage,batConfig:this.props.batConfig,channel_contrast:t,changeSearch:this.props.changeSearch,rowData:n});return F.a.createElement("div",{className:"tabSwitching"},F.a.createElement("div",{className:"userStyle listStyle"},F.a.createElement(J.a.Provider,{value:r},F.a.createElement(B,{changeSearch:this.props.changeSearch,channel_contrast:t}),F.a.createElement("div",{className:"header-tool"},F.a.createElement("p",null,"支付管理")),F.a.createElement(i.a,{className:"content-main"},F.a.createElement("div",{className:"content-table"},F.a.createElement(T.a,a))),this.state.Setting&&F.a.createElement(be,{changeSearch:this.props.changeSearch}),this.state.description&&F.a.createElement(Se,{changeSearch:this.props.changeSearch}))))}}]),n}(V.Component))||Pe}}]);